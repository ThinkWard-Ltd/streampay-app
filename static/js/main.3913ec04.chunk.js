(this["webpackJsonpstreamflow-app"]=this["webpackJsonpstreamflow-app"]||[]).push([[0],{174:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return b}));var r=n(1),a=n.n(r),c=n(5),s=n(3),i=n(35),o=n.n(i),l=n(8),u=(n(30),n(73)),d=(n(77),n(25));function b(e,t,n,r,a){return m.apply(this,arguments)}function m(){return(m=Object(c.a)(a.a.mark((function e(t,n,r,c,i){var o,d;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=j(t,i.publicKey),d=new s.Transaction({feePayer:r.publicKey}).add(o),e.next=4,Object(u.a)(l.f,d,n,r,c,i);case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function j(e,t){var n=e.sender,r=e.receiver;return new s.TransactionInstruction({keys:[{pubkey:new s.PublicKey(n),isSigner:!0,isWritable:!0},{pubkey:new s.PublicKey(r),isSigner:!1,isWritable:!0},{pubkey:t,isSigner:!0,isWritable:!0},{pubkey:s.SystemProgram.programId,isSigner:!1,isWritable:!1}],programId:new s.PublicKey(d.a.getState().programId),data:f(e)})}function f(t){var n=t.amount,r=t.start,a=t.end,c=o.a.struct([o.a.u8("instruction"),o.a.ns64("start"),o.a.ns64("end"),o.a.nu64("amount")]),i=e.alloc(c.span);return c.encode({instruction:l.f,start:r,end:a,amount:Math.trunc(n*s.LAMPORTS_PER_SOL)},i),i}}).call(this,n(6).Buffer)},175:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return b}));var r=n(1),a=n.n(r),c=n(5),s=n(35),i=n.n(s),o=n(8),l=n(3),u=(n(30),n(73)),d=(n(77),n(25));function b(e,t,n,r,a){return m.apply(this,arguments)}function m(){return(m=Object(c.a)(a.a.mark((function e(t,n,r,c,s){var i,d,b;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=n.receiver,d=j(t,i),b=(new l.Transaction).add(d),e.next=5,Object(u.a)(o.g,b,r,c,s);case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function j(e,t){return new l.TransactionInstruction({keys:[{pubkey:new l.PublicKey(t),isSigner:!0,isWritable:!0},{pubkey:new l.PublicKey(e),isSigner:!1,isWritable:!0},{pubkey:new l.PublicKey(o.i),isSigner:!1,isWritable:!0},{pubkey:l.SystemProgram.programId,isSigner:!1,isWritable:!1}],programId:new l.PublicKey(d.a.getState().programId),data:f()})}function f(){var t=i.a.struct([i.a.u8("instruction"),i.a.nu64("amount")]),n=e.alloc(t.span);return t.encode({instruction:o.g,amount:0},n),n}}).call(this,n(6).Buffer)},176:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return b}));var r=n(1),a=n.n(r),c=n(5),s=n(35),i=n.n(s),o=n(8),l=n(3),u=(n(30),n(73)),d=(n(77),n(25));function b(e,t,n,r,a){return m.apply(this,arguments)}function m(){return(m=Object(c.a)(a.a.mark((function e(t,n,r,c,s){var i,d,b,m;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=n.sender,d=n.receiver,b=j(t,i,d),m=(new l.Transaction).add(b),e.next=5,Object(u.a)(o.e,m,r,c,s);case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function j(e,t,n){return new l.TransactionInstruction({keys:[{pubkey:new l.PublicKey(t),isSigner:!0,isWritable:!0},{pubkey:new l.PublicKey(n),isSigner:!1,isWritable:!0},{pubkey:new l.PublicKey(e),isSigner:!1,isWritable:!0},{pubkey:l.SystemProgram.programId,isSigner:!1,isWritable:!1}],programId:new l.PublicKey(d.a.getState().programId),data:f()})}function f(){var t=i.a.struct([i.a.u8("instruction")]),n=e.alloc(t.span);return t.encode({instruction:o.e},n),n}}).call(this,n(6).Buffer)},25:function(e,t,n){"use strict";var r=n(22),a=n(9),c=n(243),s=n(244),i=function(e){return{balance:0,setBalance:function(t){return e({balance:t})}}},o=n(41),l=function(e,t){return{streams:{},addStream:function(n,c){return e({streams:Object(a.a)(Object(a.a)({},t().streams),{},Object(r.a)({},n,c))})},deleteStream:function(n){var r=Object(a.a)({},t().streams);delete r[n],e({streams:r})},clearStreams:function(){return e({streams:{}})}}},u=n(3),d=n(27),b=n(37),m={},j={},f=function(e,t){return{walletType:null,wallet:function(){var e=t();return function(e,t){if(!t||!e)return null;var n=t+e.name;return m[n]||(m=Object(r.a)({},n,e.adapter())),m[n]}(e.walletType,e.clusterUrl())},connection:function(){return function(e){if(!e)return null;var t=e;return j[t]||(j=Object(r.a)({},t,new u.Connection(e))),j[t]}(t().clusterUrl())},setWalletType:function(n){t().persistStoreToLocalStorage(),e({walletType:n})},connectWallet:function(){var e;return null===(e=t().wallet())||void 0===e?void 0:e.connect().catch((function(e){t().setWalletType(null),d.b.error(e instanceof b.WalletNotFoundError?"Wallet extension not installed":"Wallet not connected, please try again")}))},disconnectWallet:function(){var e,n=t();n.persistStoreToLocalStorage(),null===(e=n.wallet())||void 0===e||e.disconnect()}}},p=function(){var e,t,n=O.getState();localStorage.cluster=n.cluster,localStorage.programId=n.programId,localStorage.walletType=null===(e=n.walletType)||void 0===e?void 0:e.name;var c=JSON.parse(localStorage.streams||"{}"),s=null===(t=n.wallet())||void 0===t?void 0:t.publicKey;if(s){var i=Object(a.a)(Object(a.a)({},c),{},Object(r.a)({},n.cluster,Object(a.a)(Object(a.a)({},c[n.cluster]),{},Object(r.a)({},s.toBase58(),n.streams))));localStorage.streams=JSON.stringify(i)}},O=Object(c.a)(Object(s.devtools)((function(e,t){return Object(a.a)(Object(a.a)(Object(a.a)(Object(a.a)(Object(a.a)({},i(e,t)),Object(o.e)(e,t)),l(e,t)),f(e,t)),{},{persistStoreToLocalStorage:p})})));window.addEventListener("beforeunload",p);t.a=O},251:function(e,t,n){},252:function(e,t){},255:function(e,t){},262:function(e,t){},273:function(e,t){},274:function(e,t){},298:function(e,t){},30:function(e,t,n){"use strict";n.d(t,"d",(function(){return f})),n.d(t,"e",(function(){return p})),n.d(t,"a",(function(){return O})),n.d(t,"b",(function(){return x})),n.d(t,"c",(function(){return h})),n.d(t,"f",(function(){return g}));var r=n(8),a=n(35),c=n.n(a),s=n(3),i=n(84),o=n(471),l=n(55),u=n.n(l),d=(n(6),n(25)),b=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"publicKey";return c.a.blob(32,e)},m=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"uint64";return c.a.blob(8,e)},j=c.a.struct([m("starttime"),m("endtime"),m("amount"),m("withdrawn"),b("sender"),b("recipient")]);function f(e){var t=j.decode(e),n=Number(i.a.fromBuffer(t.starttime)),a=Number(i.a.fromBuffer(t.endtime)),c=Number(i.a.fromBuffer(t.amount))/s.LAMPORTS_PER_SOL,l=Number(i.a.fromBuffer(t.withdrawn))/s.LAMPORTS_PER_SOL;return new O(new s.PublicKey(t.sender).toBase58(),new s.PublicKey(t.recipient).toBase58(),c,n,a,l,function(e,t,n){return n<e?r.m:n<t?r.n:r.l}(Number(n),Number(a),Object(o.a)(new Date)))}function p(e,t){return"https://explorer.solana.com/".concat(e,"/").concat(t,"?cluster=").concat(d.a.getState().explorerUrl())}function O(e,t,n,a,c,s,i,o){this.sender=e,this.receiver=t,this.amount=n,this.start=a,this.end=c,this.withdrawn=s||0,this.status=o?r.j:i||r.m,this.canceled_at=o}function x(){return u()({text:"Are you sure?",icon:"warning",buttons:!0})}function h(e){var t=document.createElement("textarea");t.value=e,t.setAttribute("readonly",""),t.style.position="absolute",t.style.left="-9999px",document.body.appendChild(t),t.select(),document.execCommand("copy"),document.body.removeChild(t)}function g(e){var t=window.location.origin+"#"+e;u()({button:"Copy Stream URL",icon:"success",title:"Stream created!",content:{element:"a",attributes:{className:"text-primary block truncate max-w-full",href:t,target:"_blank",innerHTML:t}}}).then((function(e){e&&(h(t),u()("Link copied to clipboard!","Send it to the recipient!","success"))}))}},364:function(e,t){},366:function(e,t){},380:function(e,t){},384:function(e,t){},386:function(e,t){},396:function(e,t){},398:function(e,t){},41:function(e,t,n){"use strict";n.d(t,"b",(function(){return i})),n.d(t,"a",(function(){return o})),n.d(t,"d",(function(){return l})),n.d(t,"c",(function(){return u}));var r,a,c=n(22),s=n(3),i="local",o="devnet",l="testnet",u="mainnet-beta",d=(r={},Object(c.a)(r,i,(function(){return"http://127.0.0.1:8899"})),Object(c.a)(r,o,(function(){return Object(s.clusterApiUrl)(o)})),Object(c.a)(r,l,(function(){return Object(s.clusterApiUrl)(l)})),Object(c.a)(r,u,(function(){return Object(s.clusterApiUrl)(u)})),r),b=(a={},Object(c.a)(a,i,(function(){return prompt("Program ID?")})),Object(c.a)(a,o,(function(){return"8tQZMH3NWtoiNDYwTpSZ3GVrRKbMVi2S5Xjy6UcbG5rR"})),Object(c.a)(a,l,(function(){return"8tQZMH3NWtoiNDYwTpSZ3GVrRKbMVi2S5Xjy6UcbG5rR"})),Object(c.a)(a,u,(function(){return null})),a);t.e=function(e,t){return{cluster:localStorage.cluster||o,programId:b[localStorage.cluster||o](),clusterUrl:function(){return d[t().cluster]()},explorerUrl:function(){var e=t().cluster;return e===i?"custom&customUrl=".concat(encodeURIComponent(t().clusterUrl)):e},setCluster:function(n){t().persistStoreToLocalStorage();var r=b[n]();e(r?{cluster:n,programId:r}:{cluster:o,programId:b[o]()})}}}},427:function(e,t){},429:function(e,t){},436:function(e,t){},437:function(e,t){},462:function(e,t){},470:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),c=n(107),s=n.n(c),i=(n(251),n(15)),o=n(3),l=n(27),u=n(2);function d(e){return Object(u.jsxs)("div",{className:"col-span-full",children:[Object(u.jsx)("label",{htmlFor:"account",className:"block font-medium text-gray-100",children:"Recipient Account"}),Object(u.jsx)("div",{className:"mt-1",children:Object(u.jsx)("input",{type:"text",name:"account",id:"account",defaultValue:e.value,onChange:function(t){return e.onChange(t.target.value)},pattern:"[123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz]{43,44}",className:"text-white bg-gray-800 border-primary block w-full border-black rounded-md focus:ring-secondary focus:border-secondary",placeholder:"Please double check the address","aria-describedby":"account-description",required:!0})})]})}function b(){return Object(u.jsxs)("div",{className:"col-span-2 sm:col-span-1",children:[Object(u.jsx)("label",{htmlFor:"token",className:"block font-medium text-gray-100",children:"Token"}),Object(u.jsxs)("select",{id:"token",name:"token",className:"mt-1 text-white bg-gray-800 border-primary block w-full border-black rounded-md focus:ring-secondary focus:border-secondary",defaultValue:"SOL",children:[Object(u.jsx)("option",{children:"SOL"}),Object(u.jsx)("option",{disabled:!0,children:"ETH - Coming soon\ufe0f\u2122"}),Object(u.jsx)("option",{disabled:!0,children:"BTC - Coming soon\u2122"}),Object(u.jsx)("option",{disabled:!0,children:"USDC - Coming soon\u2122"}),Object(u.jsx)("option",{disabled:!0,children:"Other tokens..."})]})]})}var m=n(473),j=n(474),f=n(8),p=Object(r.createContext)(void 0);function O(e){var t=new Date,n=Object(r.useState)(void 0),a=Object(i.a)(n,2),c=a[0],s=a[1],o=Object(r.useState)(void 0),l=Object(i.a)(o,2),d=l[0],b=l[1],j=Object(r.useState)(Object(m.a)(t,f.b)),O=Object(i.a)(j,2),x=O[0],h=O[1],g=Object(r.useState)(""),v=Object(i.a)(g,2),y=v[0],w=v[1],S=Object(r.useState)(x),N=Object(i.a)(S,2),k=N[0],T=N[1],C=Object(r.useState)(""),P=Object(i.a)(C,2),W=P[0],B=P[1];return Object(u.jsx)(p.Provider,{value:{amount:c,setAmount:s,receiver:d,setReceiver:b,startDate:x,setStartDate:h,startTime:y,setStartTime:w,endDate:k,setEndDate:T,endTime:W,setEndTime:B},children:e.children})}function x(){return Object(r.useContext)(p)}function h(e){var t=e.title,n=e.date,r=e.updateDate,a=e.time,c=e.updateTime,s=x(),i=s.startDate,o=s.startTime;function l(){var e=Object(m.a)(Object(j.a)(new Date,{minutes:1}),f.o);if(t===f.c){var s=i?new Date(i+f.p):new Date;(!i||!n||n<i)&&r(Object(m.a)(s,f.b)),i&&i===n&&a<=o?c(Object(m.a)(Object(j.a)(new Date(i+"T"+o),{minutes:5}),f.o)):o||c(e)}else(!a||a<e)&&c(e)}return Object(u.jsxs)(u.Fragment,{children:[Object(u.jsxs)("div",{className:"col-span-3 sm:col-span-1",children:[Object(u.jsxs)("label",{htmlFor:t,className:"block font-medium text-gray-100 capitalize",children:[t," Date"]}),Object(u.jsx)("div",{className:"mt-1",children:Object(u.jsx)("input",{type:"date",name:t,id:t,value:n,min:t===f.c&&i?Object(m.a)(new Date(i+f.p),f.b):Object(m.a)(new Date,f.b),max:Object(m.a)(Object(j.a)(new Date,{years:1}),f.b),onFocus:l,onClick:l,onChange:function(e){return r(e.target.value)},className:"text-white bg-gray-800 border-primary block w-full border-black rounded-md focus:ring-secondary focus:border-secondary",placeholder:"","aria-describedby":t+"-description",required:!0})})]}),Object(u.jsxs)("div",{className:"col-span-2 sm:col-span-1",children:[Object(u.jsxs)("label",{htmlFor:t+"_time",className:"block font-medium text-gray-100 capitalize",children:[t," time"]}),Object(u.jsx)("div",{className:"mt-1",children:Object(u.jsx)("input",{type:"time",name:t+"_time",id:t+"_time",value:a,onFocus:l,onClick:l,onChange:function(e){return c(e.target.value)},className:"text-white bg-gray-800 border-primary block w-full border-black rounded-md focus:ring-secondary focus:border-secondary",placeholder:"","aria-describedby":t+"_time-description",required:!0})})]})]})}function g(e){return Object(u.jsxs)("div",{className:"col-span-3 sm:col-span-1",children:[Object(u.jsx)("label",{htmlFor:"amount",className:"block font-medium text-gray-100",children:"Amount"}),Object(u.jsx)("div",{className:"mt-1",children:Object(u.jsx)("input",{step:"any",autoFocus:!0,type:"number",name:"amount",id:"amount",defaultValue:e.value,onChange:function(t){return e.onChange(t.target.value)},className:"text-white bg-gray-800 border-primary block w-full border-black rounded-md focus:ring-secondary focus:border-secondary",min:0,max:e.max||Number.MAX_SAFE_INTEGER,placeholder:"0.00","aria-describedby":"amount-description",required:!0})})]})}function v(e){return Object(u.jsx)("div",{className:"fixed top-0 bottom-0 left-0 right-0 bg-gray-900 opacity-90 z-10 ".concat(e.visible?"block":"hidden"),children:Object(u.jsx)("div",{className:"loader",children:" "})})}function y(e){var t=e.type,n=e.color;return Object(u.jsx)("div",{className:"inline",children:Object(u.jsxs)("span",{className:"align-top px-2.5 py-0.5 rounded-full text-xs font-medium bg-".concat(n,"-100 text-").concat(n,"-800 capitalize"),children:[Object(u.jsx)("svg",{className:"mr-1 -ml-1 inline align-baseline h-2 w-2 text-".concat(n,"-400"),fill:"currentColor",viewBox:"0 0 8 8",children:Object(u.jsx)("circle",{cx:4,cy:4,r:3})}),t]})})}function w(e){var t=e.title,n=e.action,r=e.color;return Object(u.jsx)("button",{onClick:n,className:"rounded-md text-sm bg-".concat(r,"-500 hover:bg-").concat(r,"-700 active:bg-").concat(r,"-900 text-white py-1 px-2"),children:t})}var S=n(471),N=n(472);function k(e){return Object(u.jsxs)("dt",{className:"col-span-full text-center",children:[Object(m.a)(Object(N.a)(e.start),"yyyy-MM-dd HH:mm")," \u2013 ",Object(m.a)(Object(N.a)(e.end),"yyyy-MM-dd HH:mm")]})}var T=Object(r.memo)(k);function C(e){var t=e.title,n=e.value,r=e.max,a=e.rtl;return n=Number(n).toFixed(2),r=Number(r).toFixed(2),Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)("dt",{children:t}),Object(u.jsx)("div",{className:"rounded-sm h-3 bg-gray-900 w-full my-auto",children:Object(u.jsx)("div",{className:"max-w-full bg-gradient-to-r from-primary to-secondary rounded-sm h-full "+(a?"float-right":""),style:{width:n/r*100+"%"}})}),Object(u.jsxs)("label",{className:"ml-2 text-right truncate",children:["\u25ce",n,Object(u.jsxs)("small",{className:"text-gray-400",children:["/",r]})]})]})}var P=n(30),W=n(45);function B(e){var t=e.data,n=t.start,a=t.end,c=t.withdrawn,s=t.amount,o=t.receiver,l=t.sender,d=t.status,b=e.myAddress,m=e.removeStream,j=e.onStatusUpdate,p=e.onCancel,O=e.onWithdraw,x=e.id,h=f.k[d],g=Object(r.useState)(D(n,a,s)),v=Object(i.a)(g,2),N=v[0],k=v[1],B=Object(r.useState)(N-c),K=Object(i.a)(B,2),R=K[0],E=K[1],A=(d===f.n||d===f.l&&c<s)&&b===o,L=(d===f.n||d===f.m)&&b===l;return Object(r.useEffect)((function(){var e=setInterval((function(){k(D(n,a,s)),E(N-c);var e=function(e,t,n){var r=Object(S.a)(new Date);return e===f.m&&r>=t?f.n:e===f.n&&r>=n?f.l:e}(d,n,a);e!==d&&j(e)}),1e3);return function(){return clearInterval(e)}})),Object(u.jsxs)("dl",{className:"text-white my-4 grid gap-y-4 gap-x-2 grid-cols-3 p-4 bg-".concat(h,"-300 bg-opacity-10 hover:bg-opacity-20 shadow rounded-lg"),children:[Object(u.jsxs)("div",{className:"col-span-full",children:[Object(u.jsx)(y,{className:"inline",type:d,color:h}),Object(u.jsx)("button",{onClick:m,className:"p-1.5 h-6 w-6 float-right align-top rounded-sm hover:bg-".concat(h,"-100 focus:outline-none focus:ring-1"),children:Object(u.jsx)(W.d,{className:"float-right w-3 h-3"})})]}),Object(u.jsx)(T,{start:n,end:a}),Object(u.jsx)(I,{url:Object(P.e)(f.d,x),title:"ID"}),Object(u.jsx)(_,{address:x,className:"col-span-2 text-sm text-gray-400"}),Object(u.jsx)(I,{url:Object(P.e)(f.d,o),title:"Recipient"}),Object(u.jsx)(_,{address:o,className:"col-span-2 text-sm text-gray-400"}),Object(u.jsx)(C,{title:"Withdrawn",value:c,max:s}),d===f.j&&Object(u.jsx)(C,{title:"Returned",value:s-c,max:s,rtl:!0}),d!==f.j&&Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)(C,{title:"Streamed",value:N,max:s}),A&&Object(u.jsxs)(u.Fragment,{children:[Object(u.jsxs)("dt",{children:["Available",Object(u.jsx)("br",{}),Object(u.jsx)("sup",{className:"text-xs text-gray-300 align-top",children:"for withdrawal"})]}),Object(u.jsxs)("dd",{className:"col-span-2",children:["\u25ce",R.toFixed(2)]}),Object(u.jsx)(w,{title:"Withdraw",action:O,color:f.k[f.n]})]}),L&&Object(u.jsx)(w,{title:"Cancel",action:p,color:f.k[f.j]})]})]})}function D(e,t,n,r){return(r=r||Object(S.a)(new Date))<e?0:r>t?n:(r-e)/(t-e)*n}function K(){return Object(u.jsxs)("footer",{className:"mt-40 mb-4 text-center text-sm font-mono text-gray-400",children:[Object(u.jsx)("img",{src:"https://solana.com/branding/horizontal/logo-horizontal-gradient-dark.png",className:"w-40 mx-auto my-2",alt:"Solana logo",loading:"lazy"}),Object(u.jsxs)("small",{children:[Object(u.jsx)(I,{url:"https://streamflow.finance",title:"StreamFlow",hideIcon:!0}),"@ ",Object(u.jsx)(I,{url:"https://solana.com/solanaszn",title:"SolanaSZN",hideIcon:!0})]})]})}function R(e){return Object(u.jsxs)("div",{className:"mb-8 text-white",children:[Object(u.jsx)("img",{src:e.src,alt:"StreamFlow Finance logo",className:"w-24 mx-auto"}),Object(u.jsxs)("h1",{className:"text-6xl text-center",children:["Stream",Object(u.jsx)("strong",{children:"Flow"})]})]})}var E=n(9),A=n(112),L=["children","className"];function M(e){var t=e.children,n=e.className,r=Object(A.a)(e,L);return Object(u.jsx)("button",Object(E.a)(Object(E.a)({className:"block mx-auto px-8 py-4 bg-gradient-to-br from-primary via-primary to-secondary border-transparent font-medium rounded shadow-sm text-white hover:opacity-90 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary "+n},r),{},{children:t}))}function I(e){var t=e.url,n=e.title,r=e.className,a=e.hideIcon||Object(u.jsx)("sup",{children:Object(u.jsx)(W.c,{className:"w-3 h-3 inline"})});return Object(u.jsx)("strong",{className:"text-gray-300 hover:text-white "+r,children:Object(u.jsxs)("a",{href:t,target:"_blank",rel:"noopener noreferrer",children:[n||t," ",a]})})}function _(e){var t=e.address,n=e.className,a="h-4 inline mr-1 cursor-pointer hover:opacity-80 align-text-bottom ",c=Object(r.useState)(!1),s=Object(i.a)(c,2),o=s[0],l=s[1];return Object(u.jsxs)("span",{className:"block truncate "+n,children:[o?Object(u.jsxs)("span",{className:"text-green-300 mr-1",children:[Object(u.jsx)(W.a,{className:a}),Object(u.jsx)("small",{children:"Copied!"})]}):Object(u.jsx)(W.b,{className:a,onClick:function(){Object(P.c)(t),l(!0),setTimeout((function(){l(!1)}),1e3)}}),t]})}var F=n(1),U=n.n(F),q=n(11),V=n(5),H=n(174),z=n(175),J=n(176),G=n(25),Z=function(e){return{balance:e.balance,setBalance:e.setBalance,addStream:e.addStream,connection:e.connection(),wallet:e.wallet()}};function Q(e){var t=e.loading,n=e.setLoading,r=o.Keypair.generate(),a=x(),c=a.amount,s=a.setAmount,i=a.receiver,l=a.setReceiver,m=a.startDate,j=a.setStartDate,p=a.startTime,O=a.setStartTime,v=a.endDate,y=a.setEndDate,w=a.endTime,N=a.setEndTime,k=Object(G.a)(Z),T=k.connection,C=k.wallet,W=k.balance,B=k.setBalance,D=k.addStream,K=k.cluster;function R(e){var t,n=e.name,r=e.value,a="";switch(n){case"start":a=(t=new Date(r+f.p))<new Date((new Date).toDateString())?"Cannot start the stream in the past.":"";break;case"start_time":a=(t=new Date(m+"T"+r))<new Date?"Cannot start the stream in the past.":"";break;case"end":a=new Date(r+f.p)<new Date(m+f.p)?"Umm... end date before the start date?":"";break;case"end_time":t=new Date(m+"T"+p),a=new Date(v+"T"+r)<t?"Err... end time before the start time?":""}e.setCustomValidity(a)}function E(){return A.apply(this,arguments)}function A(){return(A=Object(V.a)(U.a.mark((function e(){var t,a,s,l,u,d,b,j;return U.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=document.getElementById("form"),a=Object(q.a)(t.elements);try{for(a.s();!(s=a.n()).done;)R(s.value)}catch(f){a.e(f)}finally{a.f()}if(t.checkValidity()){e.next=6;break}return t.reportValidity(),e.abrupt("return",!1);case 6:return l=Object(S.a)(new Date(m+"T"+p)),(u=Object(S.a)(new Date(v+"T"+w)))===l&&(u=l+1),n(!0),d=new P.a(C.publicKey.toBase58(),i,c,l,u),e.next=13,Object(H.a)(d,T,C,K,r);case 13:if(b=e.sent,n(!1),!b){e.next=22;break}return Object(P.f)(r.publicKey.toBase58()),e.next=19,T.getMinimumBalanceForRentExemption(96);case 19:j=e.sent,B(W-c-j/o.LAMPORTS_PER_SOL),D(r.publicKey.toBase58(),d);case 22:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(u.jsxs)("form",{onSubmit:E,id:"form",children:[Object(u.jsxs)("div",{className:"my-4 grid gap-4 grid-cols-5 sm:grid-cols-2",children:[Object(u.jsx)(g,{onChange:s,value:c,max:W}),Object(u.jsx)(b,{}),Object(u.jsx)(d,{onChange:l,value:i}),Object(u.jsx)(h,{title:f.h,date:m,updateDate:j,time:p,updateTime:O}),Object(u.jsx)(h,{title:f.c,date:v,updateDate:y,time:w,updateTime:N})]}),(null===C||void 0===C?void 0:C.connected)?Object(u.jsx)(M,{className:"font-bold text-2xl my-5",onClick:E,type:"button",disabled:t,children:"Stream!"}):Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)("hr",{className:"my-4 sm:hidden"}),Object(u.jsx)(te,{}),Object(u.jsx)(be,{})]})]})}var X=n(41),Y=function(e){return{balance:e.balance,setBalance:e.setBalance,isMainnet:e.cluster===X.c,connection:e.connection(),wallet:e.wallet(),connectWallet:e.connectWallet,disconnectWallet:e.disconnectWallet,setWalletType:e.setWalletType}};function $(e){var t,n,a=e.loading,c=e.setLoading,s=Object(r.useState)(void 0),d=Object(i.a)(s,2),b=d[0],m=d[1],j=Object(G.a)(Y),p=j.connection,O=j.wallet,x=j.balance,h=j.setBalance,g=j.isMainnet,v=j.disconnectWallet,y=j.setWalletType;function w(){return(w=Object(V.a)(U.a.mark((function e(){var t;return U.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c(!0),e.next=3,p.requestAirdrop(O.publicKey,f.a*o.LAMPORTS_PER_SOL);case 3:t=e.sent,m(t),c(!1),l.b.success("Airdrop requested!");case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(r.useEffect)((function(){b&&p.confirmTransaction(b,f.q).then((function(e){e.value.err?l.b.error("Airdrop failed!"):(h(x+f.a),l.b.success("Airdrop confirmed. Balance updated!"))}))}),[b]),Object(u.jsxs)(u.Fragment,{children:[Object(u.jsxs)("div",{className:"mb-4 text-white",children:[Object(u.jsx)(I,{url:Object(P.e)("address",null===O||void 0===O||null===(t=O.publicKey)||void 0===t?void 0:t.toBase58()),title:"My Wallet Address"}),Object(u.jsx)(_,{address:null===O||void 0===O||null===(n=O.publicKey)||void 0===n?void 0:n.toBase58(),className:"block truncate"})]}),Object(u.jsxs)("div",{className:"mb-4 clearfix text-white",children:[Object(u.jsx)("strong",{className:"block",children:"Balance"}),Object(u.jsxs)("span",{children:["\u25ce",Number(x).toFixed(4)]}),Object(u.jsx)("button",{type:"button",onClick:function(){v(),y(null)},className:"float-right items-center px-2.5 py-1.5 shadow-sm text-xs  font-medium rounded bg-gray-500 hover:bg-gray-400 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary",children:"Disconnect"}),(null===O||void 0===O?void 0:O.connected)&&Object(u.jsx)(M,{type:"button",onClick:function(){return w.apply(this,arguments)},className:"float-right mr-2 px-2.5 py-1.5 text-xs my-0 rounded active:bg-white"+(g?" hidden":""),disabled:a,children:"Airdrop"})]})]})}var ee=function(e){return{cluster:e.cluster,setCluster:e.setCluster}};function te(){var e=Object(G.a)(ee),t=e.cluster,n=e.setCluster;return Object(u.jsx)("div",{className:"sm:absolute top-0 right-0 sm:p-4",children:Object(u.jsxs)("select",{id:"cluster",name:"cluster",className:"mt-1 text-white bg-gray-800 border-primary block w-full border-black rounded-md focus:ring-secondary focus:border-secondary",defaultValue:t,onChange:function(e){return n(e.target.value)},children:[Object(u.jsx)("option",{value:X.c,disabled:!0,children:"mainnet"}),Object(u.jsx)("option",{value:X.a,children:X.a}),Object(u.jsx)("option",{value:X.d,hidden:!0,children:X.d}),Object(u.jsx)("option",{value:X.b,hidden:!0,children:X.b})]})})}var ne=n(14),re=n(16),ae=n(33),ce=n(34),se=(r.Component,n(55)),ie=n.n(se),oe=n(85),le=function(e){return{walletType:e.walletType,setWalletType:e.setWalletType,cluster:e.cluster}},ue=document.createElement("div"),de=function(e){var t=document.createElement("div"),n=document.createElement("p"),r=document.createElement("img");r.src=e.icon,r.className="h-8 inline-block mr-4",n.innerHTML=e.name,n.className="inline-block",t.className="border-primary border cursor-pointer mb-4 p-4 text-primary rounded-md",t.onclick=function(){ie.a.setActionValue({cancel:e}),ie.a.close()},t.appendChild(r),t.appendChild(n),ue.appendChild(t)};function be(){var e=Object(G.a)(le),t=e.setWalletType,n=e.cluster,a=Object(r.useMemo)((function(){return[Object(oe.getPhantomWallet)(),Object(oe.getSolflareWebWallet)({network:n}),Object(oe.getSolflareWallet)(),Object(oe.getSolletWallet)({network:n})]}),[n]);return Object(r.useEffect)((function(){var e=localStorage.walletType;if(e){var n=a.find((function(t){return t.name===e}));n&&t(n)}}),[t,a]),Object(u.jsx)(M,{className:"font-bold text-2xl my-5",type:"button",onClick:function(){return function(e,t){ue.innerHTML="";var n,r=Object(q.a)(e);try{for(r.s();!(n=r.n()).done;){var a=n.value;de(a)}}catch(c){r.e(c)}finally{r.f()}ie()({buttons:{},content:ue,className:"bg-gray-800"}).then(t)}(a,t)},children:"Connect"})}function me(){return Object(u.jsxs)("div",{className:"mx-auto my-10 text-white text-center",children:[Object(u.jsx)("span",{children:"Your streams will appear here."}),Object(u.jsx)("br",{}),Object(u.jsx)("span",{children:"Start streaming!"})]})}var je=function(e){return{balance:e.balance,setBalance:e.setBalance,streams:e.streams,addStream:e.addStream,deleteStream:e.deleteStream,clearStreams:e.clearStreams,cluster:e.cluster,wallet:e.wallet(),connection:e.connection()}};function fe(){var e=Object(G.a)(je),t=e.wallet,n=e.connection,a=e.balance,c=e.setBalance,s=e.streams,d=e.addStream,b=e.deleteStream,m=e.clearStreams,j=e.cluster;function p(){return(p=Object(V.a)(U.a.mark((function e(r){var a,i;return U.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(z.a)(r,s[r],n,t,j);case 2:if(!e.sent){e.next=14;break}return e.next=6,n.getBalance(t.publicKey,f.q);case 6:return e.t0=e.sent,e.t1=o.LAMPORTS_PER_SOL,a=e.t0/e.t1,e.next=11,n.getAccountInfo(new o.PublicKey(r),f.q);case 11:i=e.sent,c(a),d(r,Object(P.d)(i.data));case 14:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function O(){return(O=Object(V.a)(U.a.mark((function e(r){var i,l,u,b,m,p,O;return U.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=s[r],l=i.amount,u=i.withdrawn,b=new Date,m=a,e.next=5,Object(J.a)(r,s[r],n,t,j);case 5:if(!e.sent){e.next=15;break}return e.next=9,n.getBalance(t.publicKey,f.q);case 9:e.t0=e.sent,e.t1=o.LAMPORTS_PER_SOL,p=e.t0/e.t1,O=l-(p-m),c(a+l-u),d(r,Object(E.a)(Object(E.a)({},s[r]),{},{withdrawn:O,canceled_at:Object(S.a)(b),status:f.j}));case 15:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function x(){return(x=Object(V.a)(U.a.mark((function e(t,n){return U.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=!n,!e.t0){e.next=5;break}return e.next=4,Object(P.b)();case 4:e.t0=e.sent;case 5:if(!e.t0){e.next=7;break}b(t);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(r.useEffect)((function(){var e,r;m();var a=JSON.parse(localStorage.streams||"{}"),c=(null===a||void 0===a||null===(e=a[j])||void 0===e?void 0:e[null===t||void 0===t||null===(r=t.publicKey)||void 0===r?void 0:r.toBase58()])||{},s=window.location.hash.substring(1);if(s)try{new o.PublicKey(s),c[s]=void 0}catch(b){l.b.error("Stream doesn't exist. Please double check with the sender.")}var i=function(e){if(c.hasOwnProperty(e)){var t=void 0;try{t=new o.PublicKey(e)}catch(b){l.b.error(b.message+e)}t&&n.getAccountInfo(new o.PublicKey(e)).then((function(t){(null===t||void 0===t?void 0:t.data)?d(e,Object(P.d)(t.data)):e===s&&l.b.error("Stream doesn't exist. Please double check with the sender.")}))}};for(var u in c)i(u)}),[]),Object(u.jsxs)("div",{children:[Object(u.jsx)("strong",{className:"text-white text-center text-2xl block",children:"My Streams"}),(null===t||void 0===t?void 0:t.connected)&&Object.keys(s).length>0?Object.entries(s).sort((function(e,t){var n=Object(i.a)(e,2)[1];return Object(i.a)(t,2)[1].start-n.start})).map((function(e){var n=Object(i.a)(e,2),r=n[0],a=n[1];return Object(u.jsx)(B,{onStatusUpdate:function(e){return d(r,Object(E.a)(Object(E.a)({},s[r]),{},{status:e}))},onWithdraw:function(){return function(e){return p.apply(this,arguments)}(r)},onCancel:function(){return function(e){return O.apply(this,arguments)}(r)},id:r,data:a,myAddress:t.publicKey.toBase58(),removeStream:function(){return function(e,t){return x.apply(this,arguments)}(r)}},r)})):Object(u.jsx)(me,{})]})}var pe=function(e){return{wallet:e.wallet()}};function Oe(){var e=Object(G.a)(pe).wallet,t=Object(r.useState)(!1),n=Object(i.a)(t,2),a=n[0],c=n[1];return Object(u.jsxs)("div",{className:"mx-auto grid grid-cols-1 gap-16 max-w-lg xl:grid-cols-2 xl:max-w-5xl",children:[Object(u.jsxs)("div",{className:"mb-8",children:[Object(u.jsx)(v,{visible:a}),(null===e||void 0===e?void 0:e.connected)&&Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)($,{loading:a,setLoading:c}),Object(u.jsx)("hr",{})]}),Object(u.jsx)(Q,{loading:a,setLoading:c})]}),Object(u.jsx)(fe,{})]})}var xe=n.p+"static/media/logo.c4294b7c.png",he=(n(469),function(e){return{wallet:e.wallet(),cluster:e.cluster,connection:e.connection(),setBalance:e.setBalance,setStreams:e.setStreams,connectWallet:e.connectWallet,disconnectWallet:e.disconnectWallet}});var ge=function(){var e=Object(G.a)(he),t=e.wallet,n=e.cluster,a=e.connection,c=e.setBalance,s=e.setStreams,d=e.connectWallet,b=e.disconnectWallet,m=Object(r.useReducer)((function(e){return++e}),0),j=Object(i.a)(m,2)[1];return Object(r.useEffect)((function(){if(t)return t.on("connect",(function(){j(),a.getBalance(t.publicKey).then((function(e){return c(e/o.LAMPORTS_PER_SOL)})),l.b.success("Connected to wallet!")})),t.on("disconnect",(function(){j(),l.b.info("Disconnected from wallet")})),setTimeout(d,0),function(){b()}}),[a,t,n,c,s,d,b]),Object(u.jsxs)("div",{children:[Object(u.jsxs)("div",{className:"mx-auto bg-blend-darken px-4 my-4",children:[Object(u.jsx)(R,{src:xe}),Object(u.jsx)("div",{className:"sm:absolute top-0 right-0 sm:p-4",children:Object(u.jsx)(te,{})}),Object(u.jsx)(Oe,{})]}),Object(u.jsx)(l.a,{hideProgressBar:!0,position:"bottom-left",limit:3}),Object(u.jsx)(K,{})]})};s.a.render(Object(u.jsx)(a.a.StrictMode,{children:Object(u.jsx)(O,{children:Object(u.jsx)(ge,{})})}),document.getElementById("root"))},73:function(e,t,n){"use strict";n.d(t,"a",(function(){return b}));var r=n(1),a=n.n(r),c=n(5),s=n(27),i=(n(3),n(45)),o=n(2);function l(e){var t=e.url,n=e.urlText,r=e.nonUrlText;return Object(o.jsxs)("span",{children:[r,Object(o.jsx)("br",{}),Object(o.jsxs)("a",{className:"font-bold",href:t,rel:"noopener noreferrer",target:"_blank",children:[n,Object(o.jsx)(i.c,{className:"ml-1 w-4 h-4 inline"})]})]})}n(77);var u=n(8),d=n(30);function b(e,t,n,r,a,c){return m.apply(this,arguments)}function m(){return(m=Object(c.a)(a.a.mark((function e(t,n,r,c,i,b){var m,j,f,p;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,r.getRecentBlockhash();case 3:return n.recentBlockhash=e.sent.blockhash,s.b.info("Please confirm transaction in your wallet.",{autoClose:1e4}),n.feePayer=c.publicKey,t===u.f&&n.partialSign(b),e.next=9,c.signTransaction(n);case 9:return m=e.sent,e.next=12,r.sendRawTransaction(m.serialize());case 12:return j=e.sent,s.b.dismiss(),s.b.info("Submitted transaction. Awaiting confirmation...",{autoClose:1e4}),f=u.q,e.next=18,r.confirmTransaction(j,f);case 18:return p=Object(d.e)("tx",j),s.b.dismiss(),s.b.success(Object(o.jsx)(l,{url:p,urlText:"View on explorer",nonUrlText:"Transaction ".concat(f,"!")+(f===u.q?" Please allow it few seconds to finalize.":"")}),{autoClose:15e3,closeOnClick:!0}),e.abrupt("return",!0);case 24:return e.prev=24,e.t0=e.catch(0),console.warn(e.t0),s.b.error("Error: "+e.t0.message),e.abrupt("return",!1);case 29:case"end":return e.stop()}}),e,null,[[0,24]])})))).apply(this,arguments)}},8:function(e,t,n){"use strict";n.d(t,"i",(function(){return c})),n.d(t,"a",(function(){return s})),n.d(t,"q",(function(){return i})),n.d(t,"f",(function(){return o})),n.d(t,"g",(function(){return l})),n.d(t,"e",(function(){return u})),n.d(t,"d",(function(){return d})),n.d(t,"b",(function(){return b})),n.d(t,"o",(function(){return m})),n.d(t,"p",(function(){return j})),n.d(t,"h",(function(){return f})),n.d(t,"c",(function(){return p})),n.d(t,"m",(function(){return O})),n.d(t,"n",(function(){return x})),n.d(t,"l",(function(){return h})),n.d(t,"j",(function(){return g})),n.d(t,"k",(function(){return v}));var r,a=n(22),c="61q5sBk7ZtjWJtRxnbhgKjUP9cxvdzmxcGRFxCJhQhdN",s=1,i="confirmed",o=0,l=1,u=2,d="address",b="yyyy-MM-dd",m="HH:mm",j="T00:00",f="start",p="end",O="scheduled",x="streaming",h="complete",g="canceled",v=(r={},Object(a.a)(r,O,"gray"),Object(a.a)(r,x,"green"),Object(a.a)(r,h,"blue"),Object(a.a)(r,g,"red"),r)}},[[470,1,2]]]);
//# sourceMappingURL=main.3913ec04.chunk.js.map
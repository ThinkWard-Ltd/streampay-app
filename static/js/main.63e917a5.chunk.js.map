{"version":3,"sources":["Components/Recipient.js","Components/SelectToken.js","Contexts/FormContext.js","Components/DateTime.js","Components/Amount.js","Components/Curtain.js","Components/Stream/Badge.js","Components/Stream/ActionButton.js","Components/Stream/Duration.js","Components/Stream/Progress.js","Components/Stream.js","Components/Footer.js","Components/Logo.js","Components/ButtonPrimary.js","Components/Link.js","Components/Address.js","Stores/BalanceStore.js","Contexts/NetworkContext.js","Stores/StreamsStore.js","Components/CreateStreamForm.js","Components/Account.js","Components/SelectCluster.js","Components/Banner.js","Components/EmptyStreams.js","Containers/StreamsContainer.js","Pages/Main.js","Pages/NotConnected.js","logo.png","App.js","index.js","Stores/NetworkStore.js","utils/helpers.js","Components/ToastrLink.js","Actions/sendTransaction.js","constants/ids.js","constants/index.js","Actions/createStream.js","Actions/withdrawStream.js","Actions/cancelStream.js"],"names":["Recipient","props","className","htmlFor","type","name","id","defaultValue","value","onChange","e","target","pattern","placeholder","required","SelectToken","disabled","FormContext","createContext","undefined","FormProvider","now","Date","useState","amount","setAmount","receiver","setReceiver","format","DATE_FORMAT","startDate","setStartDate","startTime","setStartTime","endDate","setEndDate","endTime","setEndTime","Provider","children","useFormContext","useContext","DateTime","title","date","updateDate","time","updateTime","initializeTime","add","minutes","TIME_FORMAT","END","minEndDate","TIME_SUFFIX","min","max","years","onFocus","onClick","Amount","step","autoFocus","Number","MAX_SAFE_INTEGER","Curtain","visible","Badge","color","fill","viewBox","cx","cy","r","ActionButton","action","Duration","fromUnixTime","start","end","memo","Progress","rtl","toFixed","style","width","Stream","data","withdrawn","sender","status","myAddress","removeStream","onStatusUpdate","onCancel","onWithdraw","STREAM_STATUS_COLOR","getStreamed","streamed","setStreamed","available","setAvailable","showWithdraw","STREAM_STATUS_STREAMING","STREAM_STATUS_COMPLETE","showCancel","STREAM_STATUS_SCHEDULED","useEffect","interval","setInterval","tmpStatus","getUnixTime","updateStatus","clearInterval","Link","url","getExplorerLink","EXPLORER_TYPE_ADDR","Address","address","STREAM_STATUS_CANCELED","timestamp","Footer","src","alt","loading","hideIcon","Logo","ButtonPrimary","rest","icon","href","rel","iconClassName","copied","setCopied","copyToClipboard","setTimeout","useBalanceStore","create","set","balance","setBalance","NetworkContext","networkStore","state","clusterUrl","NetworkProvider","cluster","useNetworkStore","SOLLET_URL","providerUrl","selectedWallet","setSelectedWallet","connected","setConnected","connection","useMemo","Connection","urlWallet","Wallet","useNetworkContext","useStreamStore","streams","localStorage","JSON","parse","setStreams","CreateStreamForm","setLoading","pda","Keypair","generate","validate","element","msg","toDateString","setCustomValidity","createStream","a","form","document","getElementById","elements","checkValidity","reportValidity","StreamData","publicKey","toBase58","_createStream","success","streamCreated","getMinimumBalanceForRentExemption","fee","LAMPORTS_PER_SOL","onSubmit","START","CLUSTER_MAINNET","Account","wallet","airdropTxSignature","setAirdropTxSignature","isMainnet","requestAirdrop","AIRDROP_AMOUNT","signature","toast","confirmTransaction","TX_FINALITY_CONFIRMED","then","result","err","error","disconnect","setCluster","SelectCluster","CLUSTER_DEVNET","CLUSTER_TESTNET","CLUSTER_LOCAL","hidden","Component","EmptyStreams","StreamsContainer","_withdrawStream","getBalance","TX_FINALITY_FINALIZED","newBalance","getAccountInfo","PublicKey","streamData","getDecodedAccountData","oldBalance","_cancelStream","newWithdrawn","canceled_at","skipPrompt","_swal","newStreams","streamID","window","location","hash","substring","hasOwnProperty","pk","message","temp","stringify","Object","keys","length","entries","sort","stream1","map","withdrawStream","cancelStream","Main","NotConnected","height","frameBorder","allowFullScreen","mainComponent","connect","App","on","info","logo","hideProgressBar","position","limit","ReactDOM","render","StrictMode","clusterUrls","clusterApiUrl","programIds","prompt","createStore","devtools","get","programId","explorerUrl","encodeURIComponent","addEventListener","getState","property","BufferLayout","blob","uint64","DataLayout","struct","buffer","accountData","decode","u64","fromBuffer","starttime","endtime","recipient","getStreamStatus","this","swal","text","buttons","el","createElement","setAttribute","left","body","appendChild","select","execCommand","removeChild","origin","button","content","attributes","innerHTML","clicked","ToastrLink","urlText","nonUrlText","sendTransaction","transaction","network","getRecentBlockhash","recentBlockhash","blockhash","autoClose","feePayer","INSTRUCTION_CREATE_STREAM","partialSign","signTransaction","signed","sendRawTransaction","serialize","dismiss","finality","closeOnClick","console","warn","STREAMFLOW_ACCOUNT_ID","INSTRUCTION_WITHDRAW_STREAM","INSTRUCTION_CANCEL_STREAM","instruction","getCreateStreamInstruction","tx","Transaction","pdaPub","TransactionInstruction","pubkey","isSigner","isWritable","SystemProgram","encodeInstructionData","layout","u8","ns64","nu64","encoded","Buffer","alloc","span","encode","Math","trunc","account_id","getWithdrawStreamInstruction","getCancelStreamInstruction"],"mappings":"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","file":"static/js/main.63e917a5.chunk.js","sourcesContent":["export default function Recipient(props: { onChange: void, value: string }) {\n    return (\n        <div className=\"col-span-full\">\n            <label htmlFor=\"account\" className=\"block font-medium text-gray-100\">\n                Recipient Account\n            </label>\n            <div className=\"mt-1\">\n                <input\n                    type=\"text\"\n                    name=\"account\"\n                    id=\"account\"\n                    defaultValue={props.value}\n                    onChange={e => props.onChange(e.target.value)}\n                    pattern=\"[123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz]{43,44}\"\n                    className=\"text-white bg-gray-800 border-primary block w-full border-black rounded-md focus:ring-secondary focus:border-secondary\"\n                    placeholder=\"Please double check the address\"\n                    aria-describedby=\"account-description\"\n                    required\n                />\n            </div>\n        </div>\n    )\n}","export default function SelectToken() {\n    return (\n        <div className=\"col-span-2 sm:col-span-1\">\n            <label htmlFor=\"token\" className=\"block font-medium text-gray-100\">\n                Token\n            </label>\n            <select\n                id=\"token\"\n                name=\"token\"\n                className=\"mt-1 text-white bg-gray-800 border-primary block w-full border-black rounded-md focus:ring-secondary focus:border-secondary\"                defaultValue=\"SOL\"\n            >\n                <option>SOL</option>\n                <option disabled>ETH - Coming soon️™</option>\n                <option disabled>BTC - Coming soon™</option>\n                <option disabled>USDC - Coming soon™</option>\n                <option disabled>Other tokens...</option>\n            </select>\n        </div>\n    )\n}\n","import {format} from \"date-fns\";\nimport {createContext, useContext, useState} from \"react\";\nimport {DATE_FORMAT} from \"../constants\";\n\nconst FormContext = createContext(undefined)\n\nexport function FormProvider(props) {\n    const now = new Date();\n\n    const [amount, setAmount] = useState(undefined);\n    const [receiver, setReceiver] = useState(undefined);\n    const [startDate, setStartDate] = useState(format(now, DATE_FORMAT));\n    const [startTime, setStartTime] = useState(\"\");\n    const [endDate, setEndDate] = useState(startDate);\n    const [endTime, setEndTime] = useState(\"\");\n\n    return <FormContext.Provider value={{\n        amount,\n        setAmount,\n        receiver,\n        setReceiver,\n        startDate,\n        setStartDate,\n        startTime,\n        setStartTime,\n        endDate,\n        setEndDate,\n        endTime,\n        setEndTime\n    }}>{props.children}</FormContext.Provider>\n}\n\nexport function useFormContext() {\n    return useContext(FormContext)\n}","import {add, format} from \"date-fns\";\nimport {DATE_FORMAT, END, TIME_FORMAT, TIME_SUFFIX} from \"../constants\";\nimport {Dispatch, SetStateAction} from \"react\";\nimport {useFormContext} from \"../Contexts/FormContext\";\n\nexport default function DateTime(props: { title: string, date: string, updateDate: Dispatch<SetStateAction<string>>, time: string, updateTime: Dispatch<SetStateAction<string>> }) {\n    const {title, date, updateDate, time, updateTime} = props;\n    const {startDate, startTime} = useFormContext();\n\n    function getMinDate(): string {\n        if (title === END && startDate) {\n            return format(new Date(startDate + TIME_SUFFIX), DATE_FORMAT);\n        } else {\n            return format(new Date(), DATE_FORMAT);\n        }\n    }\n\n    function initializeTime() {\n        const now = format(add(new Date(), {minutes: 1}), TIME_FORMAT);\n\n        if (title === END) {\n            const minEndDate = startDate ? (new Date(startDate + TIME_SUFFIX)) : (new Date())\n\n            if (!startDate || !date || date < startDate) {\n                updateDate(format(minEndDate, DATE_FORMAT))\n            }\n\n            if (startDate && startDate === date && time <= startTime) {\n                updateTime(format(add(new Date(startDate + 'T' + startTime), {minutes: 5}), TIME_FORMAT));\n            } else if (!startTime) {\n                updateTime(now)\n            }\n        } else if (!time || time < now) {\n            updateTime(now)\n        }\n    }\n\n    return (\n        <>\n            <div className=\"col-span-3 sm:col-span-1\">\n                <label htmlFor={title}\n                       className=\"block font-medium text-gray-100 capitalize\">{title} Date</label>\n                <div className=\"mt-1\">\n                    <input type=\"date\" name={title} id={title}\n                           value={date}\n                           min={getMinDate()}\n                           max={format(add(new Date(), {years: 1}), DATE_FORMAT)}\n                           onFocus={initializeTime}\n                           onClick={initializeTime}\n                           onChange={e => updateDate(e.target.value)}\n                           className=\"text-white bg-gray-800 border-primary block w-full border-black rounded-md focus:ring-secondary focus:border-secondary\"\n                           placeholder=\"\" aria-describedby={title + `-description`} required/>\n                </div>\n            </div>\n            <div className=\"col-span-2 sm:col-span-1\">\n                <label htmlFor={title + `_time`}\n                       className=\"block font-medium text-gray-100 capitalize\">{title} time</label>\n                <div className=\"mt-1\">\n                    <input type=\"time\" name={title + `_time`} id={title + `_time`}\n                           value={time}\n                           onFocus={initializeTime}\n                           onClick={initializeTime}\n                           onChange={e => updateTime(e.target.value)}\n                           className=\"text-white bg-gray-800 border-primary block w-full border-black rounded-md focus:ring-secondary focus:border-secondary\"\n                           placeholder=\"\" aria-describedby={title + `_time-description`} required/>\n                </div>\n            </div>\n        </>\n    )\n}","export default function Amount(props: { onChange: void, max: number, value: number }) {\n    return (\n        <div className=\"col-span-3 sm:col-span-1\">\n            <label htmlFor=\"amount\" className=\"block font-medium text-gray-100\">\n                Amount\n            </label>\n            <div className=\"mt-1\">\n                <input\n                    step=\"any\"\n                    autoFocus={true}\n                    type=\"number\"\n                    name=\"amount\"\n                    id=\"amount\"\n                    defaultValue={props.value}\n                    onChange={e => props.onChange(e.target.value)}\n                    className=\"text-white bg-gray-800 border-primary block w-full border-black rounded-md focus:ring-secondary focus:border-secondary\"\n                    min={0}\n                    max={props.max || Number.MAX_SAFE_INTEGER}\n                    placeholder=\"0.00\"\n                    aria-describedby=\"amount-description\"\n                    required={true}\n                />\n            </div>\n        </div>\n    )\n}\n","export default function Curtain(props: { visible: boolean }) {\n    return (\n        <div className={`fixed top-0 bottom-0 left-0 right-0 bg-gray-900 opacity-90 z-10 ${props.visible ? \"block\" : \"hidden\"}`}>\n            <div className=\"loader\"> </div>\n        </div>\n    )\n}","export default function Badge(props: { type: string, color: string }) {\n    const {type, color } = props;\n    return <div className=\"inline\">\n        <span\n            className={`align-top px-2.5 py-0.5 rounded-full text-xs font-medium bg-${color}-100 text-${color}-800 capitalize`}>\n            <svg className={`mr-1 -ml-1 inline align-baseline h-2 w-2 text-${color}-400`} fill=\"currentColor\" viewBox=\"0 0 8 8\">\n              <circle cx={4} cy={4} r={3}/>\n            </svg>\n            {type}\n      </span></div>\n}","export default function ActionButton(props: { title: string, action: void, color: string }) {\n    const {title, action, color} = props;\n\n    return (\n        <button onClick={action}\n                className={`rounded-md text-sm bg-${color}-500 hover:bg-${color}-700 active:bg-${color}-900 text-white py-1 px-2`}>\n            {title}\n        </button>\n    )\n}","import {memo} from 'react'\nimport {format, fromUnixTime} from \"date-fns\";\n\nfunction Duration(props: { start: number, end: number }) {\n    return (\n        <dt className=\"col-span-full text-center\">\n            {(format(fromUnixTime(props.start), \"yyyy-MM-dd HH:mm\"))} &ndash; {(format(fromUnixTime(props.end), \"yyyy-MM-dd HH:mm\"))}\n        </dt>\n    )\n}\n\nexport default memo(Duration);","export default function Progress(props: { title: string, value: number, max: number, rtl?: boolean }) {\n    let {title, value, max, rtl} = props;\n    value = Number(value).toFixed(2);\n    max = Number(max).toFixed(2);\n    return (\n        <>\n            <dt>{title}</dt>\n            <div className=\"rounded-sm h-3 bg-gray-900 w-full my-auto\">\n                <div\n                    className={\"max-w-full bg-gradient-to-r from-primary to-secondary rounded-sm h-full \" + (rtl ? \"float-right\" : \"\")}\n                    style={{width: value / max * 100 + \"%\"}}>\n                </div>\n            </div>\n            <label className=\"ml-2 text-right truncate\">◎{value}<small className=\"text-gray-400\">/{max}</small></label>\n        </>\n    )\n}","import Badge from \"./Stream/Badge\";\nimport ActionButton from \"./Stream/ActionButton\";\nimport {getUnixTime} from \"date-fns\";\nimport Duration from \"./Stream/Duration\";\nimport Progress from \"./Stream/Progress\";\nimport {useEffect, useState} from \"react\";\nimport {StreamData, getExplorerLink} from \"../utils/helpers\";\nimport {XIcon} from \"@heroicons/react/outline\";\nimport {\n    EXPLORER_TYPE_ADDR,\n    STREAM_STATUS_CANCELED,\n    STREAM_STATUS_COLOR,\n    STREAM_STATUS_COMPLETE,\n    STREAM_STATUS_SCHEDULED,\n    STREAM_STATUS_STREAMING\n} from \"../constants\";\nimport {Address, Link} from \"./index\";\n\nexport default function Stream(props: { data: StreamData, myAddress: string, id: string, removeStream: void, onStatusUpdate: void, onCancel: void, onWithdraw: void }) {\n    const {start, end, withdrawn, amount, receiver, sender, status} = props.data;\n    const {myAddress, removeStream, onStatusUpdate, onCancel, onWithdraw, id} = props;\n\n    const color = STREAM_STATUS_COLOR[status];\n\n    const [streamed, setStreamed] = useState(getStreamed(start, end, amount))\n    const [available, setAvailable] = useState(streamed - withdrawn);\n\n    const showWithdraw = ((status === STREAM_STATUS_STREAMING || (status === STREAM_STATUS_COMPLETE && withdrawn < amount)) && myAddress === receiver);\n    const showCancel = (status === STREAM_STATUS_STREAMING || status === STREAM_STATUS_SCHEDULED) && myAddress === sender\n    useEffect(() => {\n        const interval = setInterval(() => {\n            setStreamed(getStreamed(start, end, amount));\n            setAvailable(streamed - withdrawn);\n            const tmpStatus = updateStatus(status, start, end);\n            if (tmpStatus !== status) {\n                onStatusUpdate(tmpStatus)\n            }\n        }, 1000)\n        return () => clearInterval(interval);\n    });\n\n    return (\n        <dl className={`text-white my-4 grid gap-y-4 gap-x-2 grid-cols-3 p-4 bg-${color}-300 bg-opacity-10 hover:bg-opacity-20 shadow rounded-lg`}>\n            <div className=\"col-span-full\">\n                <Badge className=\"inline\" type={status} color={color}/>\n                <button onClick={removeStream}\n                        className={`p-1.5 h-6 w-6 float-right align-top rounded-sm hover:bg-${color}-100 focus:outline-none focus:ring-1`}>\n                    <XIcon className=\"float-right w-3 h-3\"/>\n                </button>\n            </div>\n            <Duration start={start} end={end}/>\n            <Link url={getExplorerLink(EXPLORER_TYPE_ADDR, id)} title={\"ID\"}/>\n            <Address address={id} className=\"col-span-2 text-sm text-gray-400\"/>\n            <Link url={getExplorerLink(EXPLORER_TYPE_ADDR, receiver)} title={\"Recipient\"}/>\n            <Address address={receiver} className=\"col-span-2 text-sm text-gray-400\"/>\n            <Progress title=\"Withdrawn\" value={withdrawn} max={amount}/>\n            {status === STREAM_STATUS_CANCELED &&\n            <Progress title=\"Returned\" value={amount - withdrawn} max={amount} rtl={true}/>}\n            {status !== STREAM_STATUS_CANCELED &&\n            <>\n                <Progress title=\"Streamed\" value={streamed} max={amount}/>\n                {showWithdraw &&\n                (<>\n                    <dt>Available<br/>\n                        <sup className=\"text-xs text-gray-300 align-top\">for withdrawal</sup></dt>\n                    <dd className=\"col-span-2\">◎{available.toFixed(2)}</dd>\n                    <ActionButton title=\"Withdraw\" action={onWithdraw}\n                                  color={STREAM_STATUS_COLOR[STREAM_STATUS_STREAMING]}/>\n                </>)}\n                {showCancel && <ActionButton title={\"Cancel\"} action={onCancel}\n                                             color={STREAM_STATUS_COLOR[STREAM_STATUS_CANCELED]}/>}\n            </>}\n        </dl>\n    )\n}\n\nexport function getStreamed(start: number, end: number, amount: number, timestamp?: number) {\n    timestamp = timestamp || getUnixTime(new Date());\n\n    if (timestamp < start) return 0\n    if (timestamp > end) return amount;\n\n    return (timestamp - start) / (end - start) * amount;\n}\n\nfunction updateStatus(status: string, start: number, end: number) {\n    const now = getUnixTime(new Date());\n    if (status === STREAM_STATUS_SCHEDULED && now >= start) {\n        return STREAM_STATUS_STREAMING;\n    } else if (status === STREAM_STATUS_STREAMING && now >= end) {\n        return STREAM_STATUS_COMPLETE;\n    } else {\n        return status;\n    }\n}\n","import {Link} from \"./index\";\n\nexport default function Footer() {\n    return (<footer className=\"mt-40 mb-4 text-center text-sm font-mono text-gray-400\">\n        <img src=\"https://solana.com/branding/horizontal/logo-horizontal-gradient-dark.png\"\n             className=\"w-40 mx-auto my-2\" alt=\"Solana logo\" loading=\"lazy\"/>\n        <small>\n            <Link url=\"https://streamflow.finance\" title=\"StreamFlow\" hideIcon={true}/>\n            @ <Link url=\"https://solana.com/solanaszn\" title=\"SolanaSZN\" hideIcon={true}/>\n        </small>\n    </footer>)\n}","export default function Logo(props: {src: string}){\n    return (\n        <div className=\"mb-8 text-white\">\n            <img src={props.src} alt=\"StreamFlow Finance logo\" className=\"w-24 mx-auto\"/>\n            <h1 className=\"text-6xl text-center\">Stream<strong>Flow</strong></h1>\n        </div>\n    )\n}","export default function ButtonPrimary({children, className, ...rest}) {\n    const baseClasses = \"block mx-auto px-8 py-4 bg-gradient-to-br from-primary via-primary to-secondary border-transparent font-medium rounded shadow-sm text-white hover:opacity-90 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary \"\n    return (\n        <button className={baseClasses + className} {...rest}>\n            {children}\n        </button>\n    )\n}\n","import {ExternalLinkIcon} from \"@heroicons/react/outline\";\n\nexport default function Link(props: { url: string, title?: string, className?: string, hideIcon?: boolean}) {\n    const {url, title, className, hideIcon} = props;\n    const icon = hideIcon || <sup><ExternalLinkIcon className=\"w-3 h-3 inline\"/></sup>\n\n    return (\n        <strong className={\"text-gray-300 hover:text-white \" + className}>\n            <a href={url} target=\"_blank\" rel=\"noopener noreferrer\">\n                {title || url} {icon}\n            </a>\n        </strong>\n    )\n}","import {copyToClipboard} from \"../utils/helpers\";\nimport {DuplicateIcon, CheckIcon} from \"@heroicons/react/outline\";\nimport {useState} from \"react\";\n\nexport default function Address(props: { address: string, className: string }) {\n    const {address, className} = props;\n    const iconClassName = \"h-4 inline mr-1 cursor-pointer hover:opacity-80 align-text-bottom \";\n    const [copied, setCopied] = useState(false)\n\n    function copy() {\n        copyToClipboard(address);\n        setCopied(true);\n        setTimeout(() => {\n            setCopied(false)\n        }, 1000)\n    }\n\n    return (\n        <span className={\"block truncate \" + className}>\n            {copied\n                ? (<span className=\"text-green-300 mr-1\"><CheckIcon className={iconClassName}/><small>Copied!</small></span>)\n                : <DuplicateIcon className={iconClassName} onClick={copy}/>}\n            {address}</span>\n    )\n}\n\n\n","import create from \"zustand\";\n\nconst useBalanceStore = create(set => ({\n    balance: 0,\n    setBalance: balance => set({balance})\n}))\n\nexport default useBalanceStore","import {createContext, useContext, useMemo, useState} from \"react\";\nimport {SOLLET_URL} from \"../constants\";\nimport {Connection} from \"@solana/web3.js\";\nimport Wallet from \"@project-serum/sol-wallet-adapter\";\nimport useNetworkStore from \"../Stores/NetworkStore\"\n\nconst NetworkContext = createContext(undefined)\n\nconst networkStore = state => state.clusterUrl()\n\nexport function NetworkProvider(props) {\n    const cluster = useNetworkStore(networkStore)\n    const [providerUrl,] = useState(SOLLET_URL);\n    const [selectedWallet, setSelectedWallet] = useState(undefined);\n    const [connected, setConnected] = useState(false);\n\n    const connection = useMemo(() => new Connection(cluster), [cluster]);\n    const urlWallet = useMemo(() => new Wallet(providerUrl, cluster), [providerUrl, cluster]);\n\n    return <NetworkContext.Provider value={{\n        providerUrl,\n        selectedWallet,\n        setSelectedWallet,\n        connected,\n        setConnected,\n        connection,\n        urlWallet\n    }}>{props.children}</NetworkContext.Provider>\n\n}\n\nexport function useNetworkContext(){\n    return useContext(NetworkContext)\n}\n","import create from 'zustand'\n\nconst useStreamStore = create(set => ({\n    streams: localStorage.streams ? JSON.parse(localStorage.streams) : {},\n    setStreams: streams => set({streams})\n}))\n\nexport default useStreamStore","import {Amount, ButtonPrimary, DateTime, Recipient, SelectToken,} from \"./index\";\nimport {useFormContext} from \"../Contexts/FormContext\";\nimport {getUnixTime} from \"date-fns\";\nimport {streamCreated, StreamData} from \"../utils/helpers\";\nimport {_createStream} from \"../Actions\";\nimport useBalanceStore from \"../Stores/BalanceStore\";\nimport {Keypair, LAMPORTS_PER_SOL} from \"@solana/web3.js\";\nimport {Dispatch, SetStateAction} from \"react\";\nimport {useNetworkContext} from \"../Contexts/NetworkContext\";\nimport useStreamStore from \"../Stores/StreamsStore\";\nimport useNetworkStore from \"../Stores/NetworkStore\"\nimport {START, END, TIME_SUFFIX} from \"../constants\";\n\nconst networkStore = state => state.cluster\n\nexport default function CreateStreamForm({\n                                             loading,\n                                             setLoading\n                                         }: { loading: boolean, setLoading: Dispatch<SetStateAction<boolean>> }) {\n    const pda = Keypair.generate();\n    const {\n        amount,\n        setAmount,\n        receiver,\n        setReceiver,\n        startDate,\n        setStartDate,\n        startTime,\n        setStartTime,\n        endDate,\n        setEndDate,\n        endTime,\n        setEndTime\n    } = useFormContext()\n\n    const {\n        connection, selectedWallet\n    } = useNetworkContext();\n\n    const cluster = useNetworkStore(networkStore)\n\n    const {balance, setBalance} = useBalanceStore()\n    const {streams, setStreams} = useStreamStore()\n\n    function validate(element) {\n        const {name, value} = element;\n        let start;\n        let msg = '';\n        switch (name) {\n            case \"start\":\n                start = new Date(value + TIME_SUFFIX)\n                const now =  new Date(new Date().toDateString())\n                msg = start < now ? \"Cannot start the stream in the past.\" : \"\";\n                break;\n            case \"start_time\":\n                start = new Date(startDate + \"T\" + value);\n                msg = start < new Date() ? \"Cannot start the stream in the past.\" : \"\";\n                break;\n            case \"end\":\n                msg = new Date(value + TIME_SUFFIX) < new Date(startDate + TIME_SUFFIX) ? \"Umm... end date before the start date?\" : \"\";\n                break;\n            case \"end_time\":\n                start = new Date(startDate + \"T\" + startTime);\n                const end = new Date(endDate + \"T\" + value);\n                msg = end < start ? \"Err... end time before the start time?\" : \"\";\n                break;\n            default:\n        }\n        element.setCustomValidity(msg);\n    }\n\n    async function createStream() {\n        const form = document.getElementById('form');\n        for (const elem of form.elements) {\n            validate(elem);\n        }\n\n        if (!form.checkValidity()) {\n            form.reportValidity();\n            return false;\n        }\n\n        const start = getUnixTime(new Date(startDate + \"T\" + startTime));\n        let end = getUnixTime(new Date(endDate + \"T\" + endTime));\n\n        // Make sure that end time is always AFTER start time\n        if (end === start) {\n            end = start + 1;\n        }\n\n        setLoading(true);\n        const data = new StreamData(selectedWallet.publicKey.toBase58(), receiver, amount, start, end);\n        const success = await _createStream(data, connection, selectedWallet, cluster, pda)\n        setLoading(false);\n\n        if (success) {\n            streamCreated(pda.publicKey.toBase58())\n            const fee = await connection.getMinimumBalanceForRentExemption(96)\n            setBalance(balance - amount - fee / LAMPORTS_PER_SOL);\n            setStreams({...streams, [pda.publicKey.toBase58()]: data})\n        }\n    }\n\n    return (\n        <form onSubmit={createStream} id=\"form\">\n            <div className=\"my-4 grid gap-4 grid-cols-5 sm:grid-cols-2\">\n                <Amount onChange={setAmount} value={amount} max={balance}/>\n                <SelectToken/>\n                <Recipient onChange={setReceiver} value={receiver}/>\n                <DateTime\n                    title={START}\n                    date={startDate}\n                    updateDate={setStartDate}\n                    time={startTime}\n                    updateTime={setStartTime}\n                />\n                <DateTime\n                    title={END}\n                    date={endDate}\n                    updateDate={setEndDate}\n                    time={endTime}\n                    updateTime={setEndTime}\n                />\n            </div>\n            <ButtonPrimary\n                className=\"font-bold text-2xl my-5\"\n                onClick={createStream}\n                type=\"button\"\n                disabled={loading}\n            >\n                Stream!\n            </ButtonPrimary>\n        </form>\n    );\n}\n","import {Address, ButtonPrimary, Link} from \"./index\";\nimport {getExplorerLink} from \"../utils/helpers\";\nimport Wallet from \"@project-serum/sol-wallet-adapter\";\nimport {AIRDROP_AMOUNT, TX_FINALITY_CONFIRMED} from \"../constants\";\nimport {toast} from \"react-toastify\";\nimport {LAMPORTS_PER_SOL} from \"@solana/web3.js\";\nimport {Dispatch, SetStateAction, useEffect, useState} from \"react\";\nimport {useNetworkContext} from \"../Contexts/NetworkContext\";\nimport useBalanceStore from \"../Stores/BalanceStore\";\nimport useNetworkStore, { CLUSTER_MAINNET } from \"../Stores/NetworkStore\"\n\nconst networkStore = state => state.cluster === CLUSTER_MAINNET\n\nexport default function Account({\n                                    wallet,\n                                    loading,\n                                    setLoading\n                                }: { wallet: Wallet, loading: boolean, setLoading: Dispatch<SetStateAction<boolean>> }) {\n\n    const [airdropTxSignature, setAirdropTxSignature] = useState(undefined)\n    const {balance, setBalance} = useBalanceStore()\n    const {connection, selectedWallet} = useNetworkContext()\n    const isMainnet = useNetworkStore(networkStore)\n\n    useEffect(() => {\n        if (airdropTxSignature) {\n            connection.confirmTransaction(airdropTxSignature, TX_FINALITY_CONFIRMED).then(\n                result => {\n                    if (result.value.err) {\n                        toast.error('Airdrop failed!')\n                    } else {\n                        setBalance(balance + AIRDROP_AMOUNT)\n                        toast.success(\"Airdrop confirmed. Balance updated!\")\n                    }\n                }\n            )\n        }\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, [airdropTxSignature])\n\n    async function requestAirdrop() {\n        setLoading(true);\n        const signature = await connection.requestAirdrop(selectedWallet.publicKey, AIRDROP_AMOUNT * LAMPORTS_PER_SOL);\n        setAirdropTxSignature(signature);\n        setLoading(false);\n        toast.success(\"Airdrop requested!\")\n    }\n\n    return (\n        <>\n            <div className=\"mb-4 text-white\">\n                <Link url={getExplorerLink('address', wallet.publicKey.toBase58())}\n                      title=\"My Wallet Address\"/>\n                <Address address={wallet.publicKey.toBase58()} className=\"block truncate\"/>\n            </div>\n            <div className=\"mb-4 clearfix text-white\">\n                <strong className=\"block\">Balance</strong>\n                <span>◎{Number(balance).toFixed(4)}</span>\n                <button type=\"button\" onClick={() => wallet.disconnect()}\n                        className=\"float-right items-center px-2.5 py-1.5 shadow-sm text-xs  font-medium rounded bg-gray-500 hover:bg-gray-400 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary\">\n                    Disconnect\n                </button>\n                <ButtonPrimary\n                    type=\"button\" onClick={requestAirdrop}\n                    className={\"float-right mr-2 px-2.5 py-1.5 text-xs my-0 rounded active:bg-white\" + (isMainnet ? \" hidden\" : \"\")}\n                    disabled={loading}\n                >\n                    Airdrop\n                </ButtonPrimary>\n            </div>\n        </>\n    )\n}\n","import {CLUSTER_LOCAL, CLUSTER_DEVNET, CLUSTER_TESTNET, CLUSTER_MAINNET} from '../Stores/NetworkStore'\nimport useNetworkStore from \"../Stores/NetworkStore\"\n\nconst networkStore = state => [state.cluster, state.setCluster]\n\nexport default function SelectCluster() {\n    const [cluster, setCluster] = useNetworkStore(networkStore)\n    return (\n        <select\n            id=\"cluster\"\n            name=\"cluster\"\n            className=\"mt-1 text-white bg-gray-800 border-primary block w-full border-black rounded-md focus:ring-secondary focus:border-secondary\"\n            defaultValue={cluster}\n            onChange={e => setCluster(e.target.value)}\n        >\n            <option value={CLUSTER_MAINNET} disabled={true}>{CLUSTER_MAINNET} — soon™</option>\n            <option value={CLUSTER_DEVNET}>{CLUSTER_DEVNET}</option>\n            <option value={CLUSTER_TESTNET}>{CLUSTER_TESTNET}</option>\n            {/* handy for developers, but not needed for the end user */}\n            <option value={CLUSTER_LOCAL} hidden={true}>{CLUSTER_LOCAL}</option>\n        </select>\n    )\n}\n","import {XIcon} from '@heroicons/react/outline'\nimport {Component} from \"react\";\n\n//could be functional component, but we decided to let it manage its own state (open/close)\nexport default class Banner extends Component {\n    state = {\n        hidden: false\n    }\n\n    render() {\n        return (\n            <div className={`relative bg-primary ${this.state.hidden && \"hidden\"}`}>\n                <div className=\"max-w-7xl mx-auto py-3 px-3 sm:px-6 lg:px-8\">\n                    <div className=\"pr-16 sm:text-center sm:px-16\">\n                        <p className=\"font-small text-white\">\n                            <b>{this.props.title}</b>\n                            &nbsp;\n                            <span className=\"hidden lg:inline\">{this.props.message}</span>\n                        </p>\n                    </div>\n                    <div\n                        className=\"absolute inset-y-0 right-0 pt-1 pr-1 flex items-start sm:pt-1 sm:pr-2 sm:items-start\">\n                        <button type=\"button\" onClick={() => this.setState({hidden: true})}\n                                className=\"flex p-2 rounded-md hover:bg-primary focus:outline-none focus:ring-2 focus:ring-white\"\n                        >\n                            <span className=\"sr-only\">Dismiss</span>\n                            <XIcon className=\"h-6 w-6 text-white\"/>\n                        </button>\n                    </div>\n                </div>\n            </div>\n        )\n    }\n}","export default function EmptyStreams() {\n    return (<div className=\"mx-auto my-10 text-white text-center\">\n        <span>Your streams will appear here.</span>\n        <br/>\n        <span>Start streaming!</span>\n    </div>)\n}","import EmptyStreams from \"../Components/EmptyStreams\";\nimport {_swal, getDecodedAccountData} from \"../utils/helpers\";\nimport {getStreamed, Stream} from \"../Components\";\nimport {_cancelStream, _withdrawStream} from \"../Actions\";\nimport {getUnixTime} from \"date-fns\";\nimport {STREAM_STATUS_CANCELED, TX_FINALITY_FINALIZED} from \"../constants\";\nimport {useNetworkContext} from \"../Contexts/NetworkContext\";\nimport useBalanceStore from \"../Stores/BalanceStore\";\nimport useStreamStore from \"../Stores/StreamsStore\";\nimport {LAMPORTS_PER_SOL, PublicKey} from \"@solana/web3.js\";\nimport {toast} from \"react-toastify\";\nimport {useEffect} from \"react\";\nimport useNetworkStore from \"../Stores/NetworkStore\"\n\nconst networkStore = state => state.cluster\n\nexport default function StreamsContainer() {\n\n    const { selectedWallet, connection } = useNetworkContext()\n    const cluster = useNetworkStore(networkStore)\n    const {balance, setBalance} = useBalanceStore()\n    const [streams, setStreams] = useStreamStore(state => [state.streams, state.setStreams])\n\n    //componentWillMount\n    useEffect(() => {\n        const newStreams = {...streams}\n        const streamID = window.location.hash.substring(1);\n\n        if (streamID) {\n            try {\n                new PublicKey(streamID);\n                newStreams[streamID] = undefined; // We're setting the data few lines below\n            } catch (e) {\n                toast.error(\"Stream doesn't exist. Please double check with the sender.\")\n            }\n        }\n\n        for (const id in newStreams) {\n            if (newStreams.hasOwnProperty(id)) {\n                //first, the cleanup\n                let pk = undefined\n                try {\n                    pk = new PublicKey(id);\n                } catch (e) {\n                    toast.error(e.message + id)\n                    //removeStream(id, true);\n                }\n\n                if (pk) {\n                    connection.getAccountInfo(new PublicKey(id)).then(result => {\n                        const temp = {...streams}\n                        if (result?.data) {\n                            temp[id] = getDecodedAccountData(result.data);\n                        } else {\n                            if (id === streamID) {\n                                toast.error(\"Stream doesn't exist. Please double check with the sender.\")\n                            }\n                            delete temp[id]\n                        }\n                        setStreams(temp)\n                    })\n                }\n            }\n        }\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, [])\n\n    useEffect(() => {\n        localStorage.streams = JSON.stringify(streams);\n    }, [streams])\n\n    async function withdrawStream(id: string) {\n        const {start, end, amount} = streams[id];\n        const success = await _withdrawStream(id, streams[id], connection, selectedWallet, cluster)\n        if (success) {\n            //optimistic\n            const withdrawn = getStreamed(start, end, amount)\n            setBalance(balance + withdrawn)\n            setStreams({...streams, [id]: {...streams[id], withdrawn}})\n\n            //final\n            const newBalance = (await connection.getBalance(selectedWallet.publicKey, TX_FINALITY_FINALIZED)) / LAMPORTS_PER_SOL;\n            const streamData = await connection.getAccountInfo(new PublicKey(id))\n            setBalance(newBalance)\n            setStreams({...streams, [id]: getDecodedAccountData(streamData.data)})\n        }\n    }\n\n    async function cancelStream(id: string) {\n        const {amount, withdrawn} = streams[id];\n        const now = new Date();\n        const oldBalance = balance;\n        const success = await _cancelStream(id, streams[id], connection, selectedWallet, cluster)\n        if (success) {\n            const newBalance = (await connection.getBalance(selectedWallet.publicKey)) / LAMPORTS_PER_SOL;\n            const newWithdrawn = amount - (newBalance - oldBalance);\n            setBalance(balance + amount - withdrawn)\n            setStreams({\n                ...streams,\n                [id]: {\n                    ...streams[id],\n                    withdrawn: newWithdrawn,\n                    canceled_at: getUnixTime(now),\n                    status: STREAM_STATUS_CANCELED\n                }\n            })\n        }\n    }\n\n    async function removeStream(id: string, skipPrompt?: boolean) {\n        if (!skipPrompt && await _swal()) {\n            const newStreams = {...streams}\n            delete newStreams[id];\n            setStreams(newStreams)\n        }\n    }\n\n    return <div>\n        <strong className=\"text-white text-center text-2xl block\">My Streams</strong>\n        {Object.keys(streams).length > 0 ? (\n            Object.entries(streams)\n                .sort(([, stream1], [, stream2]) => stream2.start - stream1.start)\n                .map(([id, data]) => (\n                    <Stream key={id} onStatusUpdate={(status) => setStreams({\n                        ...streams,\n                        [id]: {...streams[id], status}\n                    })}\n                            onWithdraw={() => withdrawStream(id)} onCancel={() => cancelStream(id)}\n                            id={id} data={data} myAddress={selectedWallet.publicKey.toBase58()}\n                            removeStream={() => removeStream(id)}/>\n                ))\n        ) : <EmptyStreams/>}\n    </div>\n}\n","import {useState} from \"react\";\nimport {Account, CreateStreamForm, Curtain} from \"../Components\";\nimport StreamsContainer from \"../Containers/StreamsContainer\";\nimport {useNetworkContext} from \"../Contexts/NetworkContext\";\n\nexport default function Main() {\n    const [loading, setLoading] = useState(false)\n    const {selectedWallet} = useNetworkContext()\n\n    return (\n        <div className=\"mx-auto grid grid-cols-1 gap-16 max-w-lg xl:grid-cols-2 xl:max-w-5xl\">\n            <div className=\"mb-8\">\n                <Curtain visible={loading}/>\n                <Account wallet={selectedWallet} loading={loading} setLoading={setLoading}/>\n                <hr/>\n                <CreateStreamForm loading={loading} setLoading={setLoading}/>\n            </div>\n            <StreamsContainer/>\n        </div>\n    )\n}","import ButtonPrimary from \"../Components/ButtonPrimary\";\n\nexport default function NotConnected(props: { action: () => * }) {\n    return <div className=\"max-w-md mx-auto\">\n        <iframe width=\"100%\" height={270} src=\"https://www.youtube-nocookie.com/embed/7HWzcxu-De0\"\n                title=\"StreamFlow Finance Demo\" frameBorder=\"0\"\n                allowFullScreen>&nbsp;</iframe>\n        <ButtonPrimary className=\"font-bold text-2xl my-5\"\n                       type=\"button\"\n                       onClick={props.action}>\n            Connect\n        </ButtonPrimary>\n    </div>;\n}\n","export default __webpack_public_path__ + \"static/media/logo.c4294b7c.png\";","import {useEffect} from \"react\";\nimport {LAMPORTS_PER_SOL} from \"@solana/web3.js\";\nimport {toast, ToastContainer} from \"react-toastify\";\nimport {Main, NotConnected} from \"./Pages\";\nimport {Footer, Logo} from \"./Components\";\nimport {useNetworkContext} from \"./Contexts/NetworkContext\";\nimport useBalanceStore from \"./Stores/BalanceStore\";\nimport SelectCluster from \"./Components/SelectCluster\";\nimport logo from './logo.png'\nimport 'react-toastify/dist/ReactToastify.css';\n\nconst mainComponent = (connected: boolean, selectedWallet: ?Wallet) => {\n    if (connected) {\n        return <Main/>\n    }\n    else {\n        return <>\n            <div className=\"sm:absolute top-0 right-0 p-4\"><SelectCluster/></div>\n            <NotConnected action={() => selectedWallet.connect()}/>\n        </>\n    }\n}\n\nfunction App() {\n    const {\n        selectedWallet,\n        setSelectedWallet,\n        urlWallet,\n        connected,\n        setConnected,\n        connection,\n    } = useNetworkContext()\n\n    const {setBalance} = useBalanceStore()\n\n    useEffect(() => {\n        if (selectedWallet) {\n            selectedWallet.on('connect', () => {\n                setConnected(true);\n                connection.getBalance(selectedWallet.publicKey)\n                    .then(result => setBalance(result / LAMPORTS_PER_SOL));\n                toast.success('Connected to wallet!');\n            });\n            selectedWallet.on('disconnect', () => {\n                setConnected(false);\n                // setSelectedWallet(undefined);\n                toast.info('Disconnected from wallet');\n            });\n            //selectedWallet.connect();\n            return () => {\n                selectedWallet.disconnect();\n            };\n        }\n    }, [connection, selectedWallet, setBalance, setConnected]);\n\n    useEffect(() => {\n        setSelectedWallet(urlWallet)\n    }, [setSelectedWallet, urlWallet])\n\n    return (\n        <div>\n            <div className={\"mx-auto bg-blend-darken px-4 my-4\"}>\n                <Logo src={logo}/>\n                {mainComponent(connected, selectedWallet)}\n            </div>\n            <ToastContainer hideProgressBar position=\"bottom-left\" limit={3}/>\n            <Footer/>\n        </div>\n    );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n// import reportWebVitals from './reportWebVitals';\nimport {FormProvider} from \"./Contexts/FormContext\";\nimport {NetworkProvider} from \"./Contexts/NetworkContext\";\n\nReactDOM.render(\n    <React.StrictMode>\n        <NetworkProvider>\n            <FormProvider>\n                <App/>\n            </FormProvider>\n        </NetworkProvider>\n    </React.StrictMode>,\n    document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\n\n// reportWebVitals();\n","import createStore from 'zustand'\nimport {clusterApiUrl} from \"@solana/web3.js\"\nimport { devtools } from 'zustand/middleware'\n\nexport const CLUSTER_LOCAL = 'local'\nexport const CLUSTER_DEVNET = 'devnet'\nexport const CLUSTER_TESTNET = 'testnet'\nexport const CLUSTER_MAINNET = 'mainnet-beta'\n\nconst clusterUrls = {\n    [CLUSTER_LOCAL]: () => 'http://127.0.0.1:8899',\n    [CLUSTER_DEVNET]: () => clusterApiUrl(CLUSTER_DEVNET),\n    [CLUSTER_TESTNET]: () => clusterApiUrl(CLUSTER_TESTNET),\n    [CLUSTER_MAINNET]: () => clusterApiUrl(CLUSTER_MAINNET),\n}\n\nconst programIds = {\n    [CLUSTER_LOCAL]: () => prompt(\"Program ID?\"),\n    [CLUSTER_DEVNET]: () => \"8tQZMH3NWtoiNDYwTpSZ3GVrRKbMVi2S5Xjy6UcbG5rR\",\n    [CLUSTER_TESTNET]: () => \"8tQZMH3NWtoiNDYwTpSZ3GVrRKbMVi2S5Xjy6UcbG5rR\",\n    [CLUSTER_MAINNET]: () => null, // TODO: publish the program to mainnet\n}\n\nconst networkStore = createStore(devtools((set: Function, get: Function) => ({\n    // state\n    cluster: localStorage.cluster || CLUSTER_DEVNET,\n    programId: programIds[localStorage.cluster || CLUSTER_DEVNET](),\n\n    // actions\n    clusterUrl: () => clusterUrls[get().cluster](),\n    explorerUrl: () => {\n        const cluster = get().cluster\n        return cluster === CLUSTER_LOCAL ? `custom&customUrl=${encodeURIComponent(get().clusterUrl)}` : cluster\n    },\n    setCluster: (cluster: string) => {\n        const programId = programIds[cluster]()\n        if (programId) {\n            set({cluster, programId})\n        }\n        else {\n            set({cluster: CLUSTER_DEVNET, programId: programIds[CLUSTER_DEVNET]()})\n        }\n    }\n})))\n\nwindow.addEventListener(\"beforeunload\", () => {\n    const state = networkStore.getState()\n    localStorage.cluster = state.cluster\n    localStorage.programId = state.programId\n})\n\nexport default networkStore","import {\n    STREAM_STATUS_CANCELED,\n    STREAM_STATUS_COMPLETE,\n    STREAM_STATUS_SCHEDULED,\n    STREAM_STATUS_STREAMING\n} from \"../constants\";\nimport BufferLayout from \"buffer-layout\";\nimport {LAMPORTS_PER_SOL, PublicKey} from \"@solana/web3.js\";\nimport {u64} from \"@solana/spl-token\";\nimport {getUnixTime} from \"date-fns\";\nimport swal from \"sweetalert\";\nimport {Buffer} from 'buffer/';\nimport useNetworkStore from \"../Stores/NetworkStore\";\n\nexport const publicKey = (property = \"publicKey\"): BufferLayout.Layout => {\n    return BufferLayout.blob(32, property);\n};\n\nexport const uint64 = (property = \"uint64\"): BufferLayout.Layout => {\n    return BufferLayout.blob(8, property);\n};\n\nconst DataLayout = BufferLayout.struct([\n    uint64(\"starttime\"),\n    uint64(\"endtime\"),\n    uint64(\"amount\"),\n    uint64(\"withdrawn\"),\n    publicKey(\"sender\"),\n    publicKey(\"recipient\"),\n]);\n\nexport function getDecodedAccountData(buffer: Buffer) {\n    const accountData = DataLayout.decode(buffer);\n\n    const start = Number(u64.fromBuffer(accountData.starttime));\n    const end = Number(u64.fromBuffer(accountData.endtime));\n    const amount = Number(u64.fromBuffer(accountData.amount)) / LAMPORTS_PER_SOL;\n    const withdrawn = Number(u64.fromBuffer(accountData.withdrawn)) / LAMPORTS_PER_SOL;\n    const sender = (new PublicKey(accountData.sender)).toBase58();\n    const recipient = (new PublicKey(accountData.recipient)).toBase58();\n\n    const status = getStreamStatus(Number(start), Number(end), getUnixTime(new Date())) //in milliseconds\n\n    return new StreamData(sender, recipient, amount, start, end, withdrawn, status);\n}\n\nexport function getExplorerLink(type: string, id: string): string {\n    return `https://explorer.solana.com/${type}/${id}?cluster=${useNetworkStore.getState().explorerUrl()}`;\n}\n\nexport function getStreamStatus(start: number, end: number, now: number) {\n    if (now < start) {\n        return STREAM_STATUS_SCHEDULED\n    } else if (now < end) {\n        return STREAM_STATUS_STREAMING\n    } else {\n        return STREAM_STATUS_COMPLETE\n    }\n}\n\nexport function StreamData(sender: string, receiver: string, amount: number, start: number, end: number, withdrawn?: number, status?: string, canceled_at: number) {\n    this.sender = sender;\n    this.receiver = receiver;\n    this.amount = amount;\n    this.start = start;\n    this.end = end;\n    this.withdrawn = withdrawn || 0;\n    this.status = canceled_at ? STREAM_STATUS_CANCELED : (status || STREAM_STATUS_SCHEDULED);\n    this.canceled_at = canceled_at;\n}\n\nexport function _swal(): Promise {\n    return swal({text: \"Are you sure?\", icon: \"warning\", buttons: true})\n}\n\nexport function copyToClipboard(value): void {\n    const el = document.createElement('textarea');\n    el.value = value;\n    el.setAttribute('readonly', '');\n    el.style.position = 'absolute';\n    el.style.left = '-9999px';\n    document.body.appendChild(el);\n    el.select();\n    document.execCommand('copy');\n    document.body.removeChild(el);\n}\n\nexport function streamCreated(id: string) {\n    const url = window.location.origin + \"#\" + id;\n    swal({\n        button: \"Copy Stream URL\",\n        icon: 'success',\n        title: \"Stream created!\",\n        //sweet alert accepts pure HTML Node, so some wrapping must be done https://sweetalert.js.org/guides/#using-dom-nodes-as-content\n        content:\n            {\n                element: \"a\",\n                attributes: {\n                    className: \"text-primary block truncate max-w-full\",\n                    href: url,\n                    target: \"_blank\",\n                    innerHTML: url\n                }\n            }\n    }).then((clicked) => {\n        if (clicked) {\n            copyToClipboard(url);\n            swal(\"Link copied to clipboard!\", \"Send it to the recipient!\", \"success\")\n        }\n    })\n}\n","import {ExternalLinkIcon} from \"@heroicons/react/outline\";\n\nexport default function ToastrLink(props: { url: string, urlText: string, nonUrlText: string }) {\n    const {url, urlText, nonUrlText} = props;\n    return <span>{nonUrlText}<br/>\n        <a className=\"font-bold\"\n           href={url} rel=\"noopener noreferrer\"\n           target=\"_blank\">{urlText}<ExternalLinkIcon className=\"ml-1 w-4 h-4 inline\"/>\n        </a>\n    </span>\n}","import {toast} from \"react-toastify\";\nimport {Connection, Keypair, Transaction} from \"@solana/web3.js\";\nimport ToastrLink from \"../Components/ToastrLink\";\nimport Wallet from \"@project-serum/sol-wallet-adapter\";\nimport {INSTRUCTION_CREATE_STREAM, TX_FINALITY_CONFIRMED} from \"../constants\";\nimport {getExplorerLink} from \"../utils/helpers\";\n\nexport default async function sendTransaction(type: number, transaction: Transaction, connection: Connection, wallet: Wallet, network?: string, pda?: Keypair) {\n    try {\n        transaction.recentBlockhash = (await connection.getRecentBlockhash()).blockhash;\n        toast.info('Please confirm transaction in your wallet.', {autoClose: 15000});\n        transaction.feePayer = wallet.publicKey;\n\n        if (type === INSTRUCTION_CREATE_STREAM) {\n            transaction.partialSign(pda);\n        }\n\n        const signed = await wallet.signTransaction(transaction);\n        const signature = await connection.sendRawTransaction(signed.serialize());\n        toast.dismiss();\n        toast.info('Submitted transaction. Awaiting confirmation...', {autoClose:15000});\n\n        // can use 'finalized' which gives 100% certainty, but requires much longer waiting.\n        const finality = TX_FINALITY_CONFIRMED\n        await connection.confirmTransaction(signature, finality)\n        const url = getExplorerLink('tx', signature)\n        toast.dismiss();\n        toast.success(\n            <ToastrLink\n                url={url}\n                urlText=\"View on explorer\"\n                nonUrlText={`Transaction ${finality}!` + (finality === TX_FINALITY_CONFIRMED ? \" Please allow it few seconds to finalize.\" : \"\")}\n            />,\n            {autoClose: 20000, closeOnClick: true}\n        )\n        return true;\n    } catch (e) {\n        console.warn(e);\n        //todo log these errors somewhere for our reference\n        toast.error('Error: ' + e.message);\n        return false;\n    }\n}\n","export const STREAMFLOW_ACCOUNT_ID = \"DrFtxPb9F6SxpHHHFiEtSNXE3SZCUNLXMaHS6r8pkoz2\";","export * from './ids';\n\nexport const SOLLET_URL = 'https://www.sollet.io';\nexport const AIRDROP_AMOUNT = 1; // 1 SOL is the cap on the testnet\n\nexport const TX_FINALITY_CONFIRMED = \"confirmed\";\nexport const TX_FINALITY_FINALIZED = \"finalized\";\n\nexport const INSTRUCTION_CREATE_STREAM = 0;\nexport const INSTRUCTION_WITHDRAW_STREAM = 1;\nexport const INSTRUCTION_CANCEL_STREAM = 2;\n\nexport const EXPLORER_TYPE_TX = \"tx\";\nexport const EXPLORER_TYPE_ADDR = \"address\";\n\nexport const DATE_FORMAT = \"yyyy-MM-dd\";\nexport const TIME_FORMAT = \"HH:mm\";\nexport const TIME_SUFFIX = \"T00:00\";\n\nexport const START = \"start\";\nexport const END = \"end\";\n\nexport const STREAM_STATUS_SCHEDULED = \"scheduled\";\nexport const STREAM_STATUS_STREAMING = \"streaming\";\nexport const STREAM_STATUS_COMPLETE = \"complete\";\nexport const STREAM_STATUS_CANCELED = \"canceled\";\n\n//don't forget to update tailwind.config.js to safelist dynamically generated classes\nexport const STREAM_STATUS_COLOR = {\n    [STREAM_STATUS_SCHEDULED]: 'gray', // now < start\n    [STREAM_STATUS_STREAMING]: 'green', // start <= now < end\n    [STREAM_STATUS_COMPLETE]: 'blue', //now >= end;\n    [STREAM_STATUS_CANCELED]: 'red',\n}\n","import {\n    Connection,\n    Keypair,\n    LAMPORTS_PER_SOL,\n    PublicKey,\n    SystemProgram,\n    Transaction,\n    TransactionInstruction\n} from \"@solana/web3.js\";\nimport BufferLayout from \"buffer-layout\";\nimport {INSTRUCTION_CREATE_STREAM} from \"../constants\";\nimport {StreamData} from \"../utils/helpers\";\nimport sendTransaction from \"./sendTransaction\";\nimport Wallet from \"@project-serum/sol-wallet-adapter\";\nimport useNetworkStore from \"../Stores/NetworkStore\"\n\nexport default async function _createStream(data: StreamData, connection: Connection, wallet: Wallet, network?: string, pda: Keypair) {\n    const instruction = getCreateStreamInstruction(data, pda.publicKey)\n    const tx = new Transaction({feePayer: wallet.publicKey}).add(instruction);\n    return await sendTransaction(INSTRUCTION_CREATE_STREAM, tx, connection, wallet, network, pda);\n}\n\nfunction getCreateStreamInstruction(data: StreamData, pdaPub: PublicKey): TransactionInstruction {\n    const {sender, receiver} = data;\n\n    return new TransactionInstruction({\n        keys: [{\n            pubkey: new PublicKey(sender),\n            isSigner: true,\n            isWritable: true\n        }, {\n            pubkey: new PublicKey(receiver), //recipient\n            isSigner: false,\n            isWritable: true\n        }, {\n            pubkey: pdaPub, //PDA used for data\n            isSigner: true,\n            isWritable: true\n        }, {\n            pubkey: SystemProgram.programId, //system program required to make a transfer\n            isSigner: false,\n            isWritable: false\n        }],\n        programId: new PublicKey(useNetworkStore.getState().programId),\n        data: encodeInstructionData(data),\n    });\n}\n\n\nfunction encodeInstructionData(data: StreamData) {\n    const {amount, start, end} = data;\n    // Packed as little endian\n    const layout = BufferLayout.struct([\n        BufferLayout.u8(\"instruction\"),\n        BufferLayout.ns64(\"start\"),\n        BufferLayout.ns64(\"end\"),\n        // N.B. JS Number has 53 significant bits, so numbers larger than\n        // 2^53 can be misrepresented\n        BufferLayout.nu64(\"amount\")\n    ]);\n\n    const encoded = Buffer.alloc(layout.span);\n    layout.encode({\n            instruction: INSTRUCTION_CREATE_STREAM,\n            start: start,\n            end: end,\n            // amount: Number.MAX_SAFE_INTEGER // limited to 2^53 - 1 = 9007199254740991\n            amount: Math.trunc(amount * LAMPORTS_PER_SOL),\n        },\n        encoded\n    );\n\n    // UInt64 alternative is to remove the \"amount\" from layout encoding and\n    // use the following code:\n    // //encoded.writeBigUInt64LE(BigInt(\"18446744073709551615\"), 9)\n\n    return encoded;\n}\n","import BufferLayout from \"buffer-layout\";\nimport {INSTRUCTION_WITHDRAW_STREAM, STREAMFLOW_ACCOUNT_ID} from \"../constants\";\nimport {Connection, PublicKey, SystemProgram, Transaction, TransactionInstruction} from \"@solana/web3.js\";\nimport {StreamData} from \"../utils/helpers\";\nimport sendTransaction from \"./sendTransaction\";\nimport Wallet from \"@project-serum/sol-wallet-adapter\";\nimport useNetworkStore from \"../Stores/NetworkStore\"\n\nexport default async function _withdrawStream(account_id: string, data: StreamData, connection: Connection, wallet: Wallet, network: string) {\n    const {receiver} = data;\n    const instruction = getWithdrawStreamInstruction(account_id, receiver)\n    const tx = new Transaction().add(instruction);\n    return await sendTransaction(INSTRUCTION_WITHDRAW_STREAM, tx, connection, wallet, network)\n}\n\nfunction getWithdrawStreamInstruction(account_id, receiver) {\n\n    return new TransactionInstruction({\n        keys: [{\n            pubkey: new PublicKey(receiver),\n            isSigner: true,\n            isWritable: true\n        }, {\n            pubkey: new PublicKey(account_id),\n            isSigner: false,\n            isWritable: true\n        }, {\n            //needed to transfer the rent only during the final withdrawal transaction\n            pubkey: new PublicKey(STREAMFLOW_ACCOUNT_ID),\n            isSigner: false,\n            isWritable: true\n        }, {\n            pubkey: SystemProgram.programId,\n            isSigner: false,\n            isWritable: false\n        }],\n        programId: new PublicKey(useNetworkStore.getState().programId),\n        data: encodeInstructionData(),\n    });\n\n}\n\nfunction encodeInstructionData() {\n    const layout = BufferLayout.struct([\n        BufferLayout.u8(\"instruction\"),\n        BufferLayout.nu64(\"amount\")\n    ]);\n\n    const data = Buffer.alloc(layout.span);\n    //TODO - allow withdrawal of arbitrary (allowed) amount\n    layout.encode({\n            instruction: INSTRUCTION_WITHDRAW_STREAM,\n            amount: 0,// 0 = whole available amount is withdrawn.\n        },\n        data\n    );\n    return data;\n}\n","import BufferLayout from \"buffer-layout\";\nimport {INSTRUCTION_CANCEL_STREAM} from \"../constants\";\nimport {Connection, PublicKey, SystemProgram, Transaction, TransactionInstruction} from \"@solana/web3.js\";\nimport {StreamData} from \"../utils/helpers\";\nimport sendTransaction from \"./sendTransaction\";\nimport Wallet from \"@project-serum/sol-wallet-adapter\";\nimport useNetworkStore from \"../Stores/NetworkStore\"\n\nexport default async function _cancelStream(account_id: string, data: StreamData, connection: Connection, wallet: Wallet, network: string) {\n    const {sender, receiver} = data;\n    const instruction = getCancelStreamInstruction(account_id, sender, receiver)\n    const tx = new Transaction().add(instruction);\n    return await sendTransaction(INSTRUCTION_CANCEL_STREAM, tx, connection, wallet, network)\n}\n\nfunction getCancelStreamInstruction(account_id, sender, receiver) {\n    return new TransactionInstruction({\n        keys: [{\n            pubkey: new PublicKey(sender),\n            isSigner: true,\n            isWritable: true\n        }, {\n            pubkey: new PublicKey(receiver),\n            isSigner: false,\n            isWritable: true\n        }, {\n            pubkey: new PublicKey(account_id),\n            isSigner: false,\n            isWritable: true\n        }, {\n            pubkey: SystemProgram.programId,\n            isSigner: false,\n            isWritable: false\n        }],\n        programId: new PublicKey(useNetworkStore.getState().programId),\n        data: encodeInstructionData(),\n    });\n\n}\n\nfunction encodeInstructionData() {\n    const layout = BufferLayout.struct([BufferLayout.u8(\"instruction\")]);\n    const data = Buffer.alloc(layout.span);\n\n    layout.encode({instruction: INSTRUCTION_CANCEL_STREAM}, data);\n\n    return data;\n}\n"],"sourceRoot":""}